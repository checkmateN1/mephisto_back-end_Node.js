// const PokerEngine = require('./pokerEngine');  // molotok
// const middleware = require('./engineMiddleware_work');   // molotok
const enumPoker = require('./enum');
const utils = require('./utils');
const playUtils = require('./playLogic/play_utils');
const addonUtils = require('./playLogic/addonUtils');
const hillUtils = require('./playLogic/hill_utils');

const _ = require('lodash');
const fs = require('fs');
const adapt_size = 10;
const diskDrive = enumPoker.enumPoker.perfomancePolicy.projectDrive;
// const diskDrive = 'D';  // mephisto

const isOfflineStrategy = false;

const handsDict = addonUtils.getHandsDict();

let currentGeneration = 'all';
let generationsNames = [];

const changeAddonPath = (generation) => {
    const newModelsPoolPath = diskDrive + modelsAllPath + ((generation === 'all') ? '' : `\\single_copies\\${generation}`);
    // console.log('newModelsPoolPath', newModelsPoolPath);

    modelsPool = new addon.ModelsPool(newModelsPoolPath, trainedPrefix);
    aggregator = new addon.RegretPoolToStrategyAggregator( modelsPool );

    currentGeneration = generation;
};

const copySingleGenerations = () => {
    const folders = fs.readdirSync((diskDrive + modelsAllPath));
    // console.log('folders');   // ['trained_RS1', 'trained_RS2', etc, 'single_copies']
    // console.log(folders);

    folders.forEach(folder => {
        if (folder !== 'single_copies' && folder !== 'bk') {
            const newFolderName = folder.replace(trainedPrefix, '');    // 1, 2, 3, etc
            const folderPath = diskDrive + modelsAllPath + `\\single_copies\\${newFolderName}`;
            try {
                if (!fs.existsSync(folderPath)){
                    fs.mkdirSync(folderPath);
                    fs.mkdirSync(folderPath + `\\${trainedPrefix}1`);

                    // copy files
                    // read files list in source folder
                    const files = fs.readdirSync((diskDrive + modelsAllPath + `\\${folder}`));

                    // copy
                    files.forEach(file => {
                        fs.copyFileSync((diskDrive + modelsAllPath + `\\${folder}\\${file}`), (folderPath + `\\${trainedPrefix}1\\${file}`));
                    });
                }
            } catch (err) {
                console.error(err);
            }
        }
    });

    // copy all files success
    generationsNames = fs.readdirSync((diskDrive + modelsAllPath + `\\single_copies`))
      .filter(folder => !isNaN(folder))
      .sort((a, b) => +a - +b);
};
// console.log('start copySingleGenerations');
// copySingleGenerations();
// console.log('generationsNames', generationsNames);


// console.log(handsDict);

const allHandsCount = 1326;

const getCardText = (cardNumber) => {
    let cardText = '';
    switch (cardNumber % 13) {
        case 12:
            cardText = 'A';
            break;
        case 11:
            cardText = 'K';
            break;
        case 10:
            cardText = 'Q';
            break;
        case 9:
            cardText = 'J';
            break;
        case 8:
            cardText = 'T';
            break;
        default:
            cardText = (cardNumber % 13 + 2);
    }

    switch (Math.floor(cardNumber / 13))
    {
        case 0:
            cardText += 'h';
            break;
        case 1:
            cardText += 'd';
            break;
        case 2:
            cardText += 'c';
            break;
        case 3:
            cardText += 's';
            break;
    }
    return cardText;
};

const textHandsArr = [];
const fillDict = () => {
    for (let i = 0; i < allHandsCount; i++) {
        textHandsArr[i] = getCardText(parseInt(handsDict[i].hi));
        textHandsArr[i] += getCardText(parseInt(handsDict[i].lo));
    }
    console.log('fill dict completed');
};
fillDict();

const getHandIndex = (handTxt) => {
    let index = textHandsArr.indexOf(handTxt);
    return index > -1 ? index : textHandsArr.indexOf(handTxt.slice(2) + handTxt.slice(0, 2))
};

// console.log('2sAc index');
// console.log(`2sAc: ${getHandIndex('2sAc')}`);       //  737
// console.log(`AhAd: ${getHandIndex('AhAd')}`);       // 0

// console.log('textHandsArr[734]');
// console.log(textHandsArr[734]);

getSizing = (strategy, cur) => {     // возвращает ближайший сайзинг к текущему
    let closedSizing = 100500;
    Object.keys(strategy).reduce((min, current) => {
        const diff = Math.abs(parseInt(cur) - parseInt(current));
        if (diff < min) {
            closedSizing = parseInt(current);
            return diff;
        } else {
            return min;
        }
    }, 100500);

    return closedSizing;
};

getMaxAmount = (arr, maxIndex) => arr.reduce((max, cur, i) => (i <= maxIndex && cur.amount > max) ? cur.amount : max, 0);

getSpectrum = (cash, position) => {
    // cash = [{ hand, weight, strategy, optimalSizing, isPreflop }, .....]
    const preflopCash = position !== undefined ? cash.reduceRight((cash, cur, i) => {
        // console.log(`position: ${position}, cur.position: ${cur.position}, cur.isPreflop: ${cur.isPreflop}`);
        if (!cash && position === cur.position && cur.isPreflop) {
            return cur.cash;
        }
        return cash;
    }, undefined) : null;
};

getHill = async (position, curInvest, movesCount, setup, isNodeSimulation, simSession, rawActions) => {
    // console.log(`start getHill! MovesCount: ${movesCount}, movesInEngine: ${setup.movesInEngine}`);
    let strategy = null;

    //
    if (isOfflineStrategy) {
        let tmp;
        try {
            tmp = strategyObject.get_strategy(setup.addonSetup);
        } catch (e) {
            // console.log('e', e);
            console.log('e.message', e.message);
            // console.log('e.messageerror', e.messageerror);
            utils.errorsHandler(e.message);
            return null;
        }

        strategy = {};
        for (let key in tmp) {
            strategy[key] =  {};
            for (let innerKey in tmp[key]) {
                strategy[key][innerKey] = { strategy:  tmp[key][innerKey], regret: 0 }
            }
        }
        // console.log('strategyObject from offline!!!');
        // console.log(strategy);
    } else {
      // чтобы получить стратегию после симуляций, нужно ввести перемноженные веса рук из setup.hillsCash[movesCount]
        try {
            if (isNodeSimulation) {
                const inputSpectres = hillUtils.getInputSpectres(rawActions, setup.newCash, movesCount);
                // console.log(JSON.stringify(inputSpectres));
                // const inputSpectres = JSON.parse('{"0":{"0":0.003559748128154451,"1":0.003559748128154451,"2":0.003559748128154451,"3":0.2599204387120745,"4":0.2599204387120745,"5":0.2599204387120745,"6":0.1343737353911358,"7":0.1343737353911358,"8":0.1343737353911358,"9":0.35325068928355974,"10":0.35325068928355974,"11":0.35325068928355974,"12":0.06116136070244947,"13":0.06116136070244947,"14":0.06116136070244947,"15":0.3099623231574655,"16":0.3099623231574655,"17":0.3099623231574655,"18":0.00573578761039998,"19":0.007747901157631351,"20":0.00434198305532098,"21":0.007747901157631351,"22":0.12806040116925194,"23":0.12806040116925194,"24":0.12806040116925194,"25":0.09753406899587762,"26":0.09753406899587762,"27":0.09753406899587762,"28":0.0023271697860751507,"29":0.0027071064998419442,"30":0.0006723534905803142,"31":0.0027071064998419442,"32":0.0005077249819318904,"33":0.0018724357911386704,"34":0.000055617497506915445,"35":0.0018724357911386704,"36":0.22516825605553625,"37":0.22516825605553625,"38":0.22516825605553625,"39":0.19706911470188684,"40":0.19706911470188684,"41":0.19706911470188684,"42":0.0011704242147730856,"43":0.0025527641692717437,"44":0.0004954224057487477,"45":0.0025527641692717437,"46":0.002969425876126161,"47":0.011600864034497251,"48":0.0002786596800767005,"49":0.011600864034497251,"50":0.002910326806242081,"51":0.0004278129612537784,"52":0.0273531592558601,"53":0.0004278129612537784,"54":0.00036818678124620396,"55":0.00019367973055582944,"56":0.0004891000534952805,"57":0.00019367973055582944,"58":0.0025447131424814412,"59":0.0001951473764686609,"60":0.007799921131214101,"61":0.0001951473764686609,"62":0.3985121082636223,"63":0.3985121082636223,"64":0.3985121082636223,"65":0.34266138761063786,"66":0.34266138761063786,"67":0.34266138761063786,"68":0.0006473968536944856,"69":0.0018810623259861502,"70":0.0002728813308198394,"71":0.0018810623259861502,"72":0.0018383547132952817,"73":0.002747927391831698,"74":0.0014533568700415191,"75":0.002747927391831698,"76":0.00018588579261703562,"78":0.00018588579261703562,"80":0.00020556449107650375,"82":0.0024655247501893,"83":0.0010697856331022822,"84":0.0006572080470131224,"85":0.0010697856331022822,"86":0.0034302360822368746,"87":0.0034302360822368746,"88":0.0034302360822368746,"89":0.004334093708068001,"90":0.006120965875245039,"91":0.006120965875245039,"92":0.004334093708068001,"93":0.006120965875245039,"94":0.006120965875245039,"95":0.004334093708068001,"96":0.006120965875245039,"97":0.006120965875245039,"98":0.0015968424584506828,"99":0.00043722232025183516,"100":0.023880003278046364,"101":0.00043722232025183516,"102":0.0013358352549986492,"103":0.0013358352549986492,"104":0.0013358352549986492,"105":0.0017360244077248912,"106":0.0017360244077248912,"107":0.0017360244077248912,"108":0.0009063781322828676,"109":0.010156749409435329,"111":0.010156749409435329,"112":0.0011599646716582187,"113":0.0012417529383266775,"114":0.012012017500600245,"115":0.0012417529383266775,"119":0.00016369354546218393,"120":0.00016369354546218393,"121":0.00016369354546218393,"122":0.0009419977886205056,"123":0.0004977183360156559,"124":0.00008824888617431259,"125":0.0004977183360156559,"126":0.013153487940503058,"127":0.005859620638202929,"128":0.02306226710922318,"129":0.005859620638202929,"130":0.0003222350272188523,"131":0.013526648430440857,"133":0.013526648430440857,"134":0.0065052032406887235,"135":0.0065052032406887235,"136":0.0065052032406887235,"137":0.004237436441649974,"138":0.004237436441649974,"139":0.004237436441649974,"140":0.0004256102014885169,"141":0.0057386487780467935,"142":0.0007344668026598865,"143":0.0057386487780467935,"144":0.00045371208096755536,"145":0.0005096519147367707,"146":0.00031188991800741367,"147":0.0005096519147367707,"148":0.003944798751165381,"149":0.003944798751165381,"150":0.003944798751165381,"151":0.00321872601770536,"152":0.00321872601770536,"153":0.00321872601770536,"154":0.00005228312212854771,"155":0.03868389977334895,"157":0.03868389977334895,"158":0.00009334616772128778,"159":0.0007090186557176795,"161":0.0007090186557176795,"165":0.0009517674356904959,"166":0.0009517674356904959,"167":0.0009517674356904959,"169":0.000010934581916746915,"170":0.00001470098249361287,"171":0.000010934581916746915,"172":0.0002146766749607846,"173":0.0002146766749607846,"174":0.0002146766749607846,"175":0.000019544928651380893,"176":0.000019544928651380893,"177":0.000019544928651380893,"178":0.0004855112570027963,"179":0.0004855112570027963,"180":0.0004855112570027963,"181":0.0021421366663947243,"182":0.00195482093570198,"183":0.00195482093570198,"184":0.0021421366663947243,"185":0.00195482093570198,"186":0.00195482093570198,"187":0.0021421366663947243,"188":0.00195482093570198,"189":0.00195482093570198,"190":0.00032797284838345506,"191":0.00047621308118385414,"192":0.0003838034161679212,"193":0.00047621308118385414,"194":0.003355417837398945,"195":0.12423177217714403,"197":0.12423177217714403,"199":0.0005950347134320637,"200":0.0004962213940220407,"201":0.0005950347134320637,"203":0.0000065156080460079465,"204":0.000014192352133844835,"205":0.0000065156080460079465,"206":0.0006270162109419579,"207":0.00007504103892692695,"208":0.00006417594325655706,"209":0.00007504103892692695,"210":0.0006224397868231041,"211":0.009099867258240777,"212":0.000753083718934482,"213":0.009099867258240777,"214":0.00013895045010680175,"215":0.00013895045010680175,"216":0.00013895045010680175,"217":0.0005189230331484791,"218":0.004677948624755251,"219":0.004677948624755251,"220":0.0005189230331484791,"221":0.004677948624755251,"222":0.004677948624755251,"223":0.0005189230331484791,"224":0.004677948624755251,"225":0.004677948624755251,"226":0.0011198021196776047,"227":0.00007250970077666384,"228":0.003586017600768569,"229":0.00007250970077666384,"230":0.0006886851392014089,"231":0.04152783589973071,"233":0.04152783589973071,"235":0.00005995749026855598,"237":0.00005995749026855598,"238":0.002529992396816053,"239":0.3452893003203228,"241":0.3452893003203228,"243":0.0012187185216078228,"244":0.0056297685663659345,"245":0.0012187185216078228,"246":0.0006738008319460667,"247":0.00029457142726631807,"248":0.00028273973175951513,"249":0.00029457142726631807,"250":0.00009119657358370885,"251":0.00008974091483188603,"252":0.000031188806235895916,"253":0.00008974091483188603,"255":0.0037583687982466222,"256":0.0023167283275588846,"257":0.0037583687982466222,"259":0.00002600403954534373,"260":0.00003421627671183929,"261":0.00002600403954534373,"262":0.0034205410724828878,"263":0.0028446581503595012,"264":0.023243586247005472,"265":0.0028446581503595012,"266":0.00015816725051482608,"267":0.00015816725051482608,"268":0.00015816725051482608,"269":0.00041162360907804723,"270":0.0008149887554162088,"271":0.0008149887554162088,"272":0.00041162360907804723,"273":0.0008149887554162088,"274":0.0008149887554162088,"275":0.00041162360907804723,"276":0.0008149887554162088,"277":0.0008149887554162088,"278":0.00011340483605017568,"279":0.00011340483605017568,"280":0.00011340483605017568,"281":0.0010393126818686318,"282":0.004721149767739724,"283":0.004721149767739724,"284":0.0010393126818686318,"285":0.004721149767739724,"286":0.004721149767739724,"287":0.0010393126818686318,"288":0.004721149767739724,"289":0.004721149767739724,"291":0.0019477433038470329,"292":0.0013654536091388622,"293":0.0019477433038470329,"294":0.002134693050927468,"295":0.002134693050927468,"296":0.002134693050927468,"297":0.004255422107538239,"298":0.0008453214673938346,"299":0.0008453214673938346,"300":0.004255422107538239,"301":0.0008453214673938346,"302":0.0008453214673938346,"303":0.004255422107538239,"304":0.0008453214673938346,"305":0.0008453214673938346,"307":0.0000672291368793633,"308":0.00013817443493784848,"309":0.0000672291368793633,"310":0.02420949640870797,"311":0.02420949640870797,"312":0.02420949640870797,"313":0.02301321934121473,"314":0.0003786449766987399,"315":0.0003786449766987399,"316":0.02301321934121473,"317":0.0003786449766987399,"318":0.0003786449766987399,"319":0.02301321934121473,"320":0.0003786449766987399,"321":0.0003786449766987399,"322":0.0006771702202974342,"323":0.0001647263034977519,"324":0.00875977558296123,"325":0.0001647263034977519,"327":0.00010132792534725558,"328":0.00023092956819586094,"329":0.00010132792534725558,"330":0.00004539675373127956,"331":0.000024845041896878697,"332":0.0013016566831530864,"333":0.000024845041896878697,"334":0.007636203405685856,"335":0.007636203405685856,"336":0.007636203405685856,"337":0.0056623790291168,"338":0.00019105129856212955,"339":0.00019105129856212955,"340":0.0056623790291168,"341":0.00019105129856212955,"342":0.00019105129856212955,"343":0.0056623790291168,"344":0.00019105129856212955,"345":0.00019105129856212955,"346":0.003177179244597245,"347":0.010510673164363759,"349":0.010510673164363759,"350":0.0016971860821994895,"351":0.00028249423344503207,"352":0.053993576557354775,"353":0.00028249423344503207,"354":0.0012780130298400171,"355":0.0012780130298400171,"356":0.0012780130298400171,"357":0.004326401549565883,"358":0.0024163968837983183,"359":0.0024163968837983183,"360":0.004326401549565883,"361":0.0024163968837983183,"362":0.0024163968837983183,"363":0.004326401549565883,"364":0.0024163968837983183,"365":0.0024163968837983183,"366":0.00009422035067404258,"367":0.00009422035067404258,"368":0.00009422035067404258,"369":0.0002941940711132608,"370":0.000649492405587681,"371":0.000649492405587681,"372":0.0002941940711132608,"373":0.000649492405587681,"374":0.000649492405587681,"375":0.0002941940711132608,"376":0.000649492405587681,"377":0.000649492405587681,"378":0.000009591902365861376,"379":0.0000012795103265495598,"380":0.00010177197858310829,"381":0.0000012795103265495598,"383":0.00005504509882763315,"384":0.00004176106372535212,"385":0.00005504509882763315,"386":0.00002590718655456002,"387":0.0000025674612590479283,"388":0.000025274919164938128,"389":0.0000025674612590479283,"390":0.003191648428654611,"391":0.007112150620527028,"392":0.0013473813655693304,"393":0.007112150620527028,"395":0.00007358134960320439,"396":0.00040086612156765866,"397":0.00007358134960320439,"398":0.002688661073728422,"399":0.05525197588778808,"400":0.011914159317784811,"401":0.05525197588778808,"403":0.0001751307351887598,"404":0.0005364276359545528,"405":0.0001751307351887598,"407":0.010772099150341535,"408":0.006819392810259315,"409":0.010772099150341535,"410":0.000046152309051616006,"411":0.000016183535479287502,"412":0.000597922398792522,"413":0.000016183535479287502,"414":0.00005635435972346374,"415":0.0000024749428191003605,"416":0.000022223588798591054,"417":0.0000024749428191003605,"418":0.002395004119611385,"419":0.018036488873712425,"420":0.016382297983185905,"421":0.018036488873712425,"423":0.00001766167346527126,"424":0.000017534915634497227,"425":0.00001766167346527126,"426":0.0007051008833171932,"427":0.014460134189551655,"428":0.0013115164289926307,"429":0.014460134189551655,"431":0.00020453118923657713,"432":0.0003979675416175154,"433":0.00020453118923657713,"434":0.0007092622255345757,"435":0.00026823889333827766,"436":0.0016266438001885368,"437":0.00026823889333827766,"439":0.0005019143026500193,"440":0.00021620024577573228,"441":0.0005019143026500193,"442":0.00001816685373893867,"443":0.000004764777233452179,"444":0.00001003930533559874,"445":0.000004764777233452179,"446":0.0003515342328423792,"447":0.0003515342328423792,"448":0.0003515342328423792,"449":0.00032836288821398187,"450":0.0005722179963370121,"451":0.0005722179963370121,"452":0.00032836288821398187,"453":0.0005722179963370121,"454":0.0005722179963370121,"455":0.00032836288821398187,"456":0.0005722179963370121,"457":0.0005722179963370121,"458":0.00046526975505635374,"459":0.00006201122327558506,"460":0.0003115972595414835,"461":0.00006201122327558506,"462":0.007475168356282425,"463":0.011930119821731543,"465":0.011930119821731543,"466":0.0015926936929159645,"467":0.00019032662536662347,"468":0.0007581790118641765,"469":0.00019032662536662347,"471":0.00017073857789232867,"472":0.00009690099622547814,"473":0.00017073857789232867,"474":0.00023259469737552365,"475":0.000044109906093730395,"476":0.00020847190393863014,"477":0.000044109906093730395,"479":0.0007606152656392493,"480":0.0011040257698725305,"481":0.0007606152656392493,"482":0.00028376971789536063,"483":0.00012046281414004135,"484":0.00010754093652711281,"485":0.00012046281414004135,"486":0.020372273174018265,"487":0.020372273174018265,"488":0.020372273174018265,"489":0.04048555552522477,"490":0.00037299879913070045,"491":0.00037299879913070045,"492":0.04048555552522477,"493":0.00037299879913070045,"494":0.00037299879913070045,"495":0.04048555552522477,"496":0.00037299879913070045,"497":0.00037299879913070045,"499":0.0004897225274852621,"500":0.00041956826669783216,"501":0.0004897225274852621,"502":0.0004448483378513354,"503":0.00004865015298451815,"504":0.00020095204592941203,"505":0.00004865015298451815,"507":0.000043102641372012434,"508":0.00005953385553938901,"509":0.000043102641372012434,"510":0.002993806787498911,"511":0.0004062366916444786,"512":0.002323581356399337,"513":0.0004062366916444786,"515":0.0006997548487040575,"516":0.0007148705377693135,"517":0.0006997548487040575,"518":0.0006385337541342719,"519":0.00012808218456844412,"520":0.00039435903373124116,"521":0.00012808218456844412,"523":0.00014903691092573148,"525":0.00014903691092573148,"526":0.0288446710844411,"527":0.0288446710844411,"528":0.0288446710844411,"529":0.08025045328351382,"530":0.002981843397446053,"531":0.002981843397446053,"532":0.08025045328351382,"533":0.002981843397446053,"534":0.002981843397446053,"535":0.08025045328351382,"536":0.002981843397446053,"537":0.002981843397446053,"538":0.00006737515882401794,"539":0.00006737515882401794,"540":0.00006737515882401794,"541":0.0003288163131680976,"542":0.0003799917867795339,"543":0.0003799917867795339,"544":0.0003288163131680976,"545":0.0003799917867795339,"546":0.0003799917867795339,"547":0.0003288163131680976,"548":0.0003799917867795339,"549":0.0003799917867795339,"550":0.02232775527528918,"552":0.02232775527528918,"553":0.11010965483866963,"555":0.008872730771973935,"556":0.11010965483866963,"557":0.008872730771973935,"558":0.008872730771973935,"559":0.11010965483866963,"560":0.008872730771973935,"562":0.0016506356170450404,"563":0.002414850714657997,"565":0.002414850714657997,"566":0.08066454732881019,"568":0.08066454732881019,"569":0.2618017660119414,"571":0.06680073531171016,"572":0.2618017660119414,"573":0.06680073531171016,"574":0.06680073531171016,"575":0.2618017660119414,"576":0.06680073531171016,"578":0.023436502806740183,"579":0.023436502806740183,"580":0.023436502806740183,"581":0.08358873036095633,"582":0.005954705792075157,"583":0.005954705792075157,"584":0.08358873036095633,"585":0.005954705792075157,"586":0.005954705792075157,"587":0.08358873036095633,"588":0.005954705792075157,"589":0.005954705792075157,"590":0.000033574573854152484,"591":0.000001884431225615895,"592":0.000006552829474285926,"593":0.000001884431225615895,"594":0.000013364095049629294,"595":0.000013364095049629294,"596":0.000013364095049629294,"597":0.000038178216447501936,"598":0.000021837950627842576,"599":0.000021837950627842576,"600":0.000038178216447501936,"601":0.000021837950627842576,"602":0.000021837950627842576,"603":0.000038178216447501936,"604":0.000021837950627842576,"605":0.000021837950627842576,"606":0.01634986488553506,"607":0.01634986488553506,"608":0.01634986488553506,"609":0.007443372269494342,"610":0.006145802217616444,"611":0.006145802217616444,"615":0.007443372269494342,"616":0.006145802217616444,"617":0.006145802217616444,"618":0.18184368534003006,"620":0.18184368534003006,"621":0.1911895516840263,"623":0.22052160615096497,"624":0.1911895516840263,"625":0.22052160615096497,"626":0.22052160615096497,"627":0.1911895516840263,"628":0.22052160615096497,"630":0.0030474512452123206,"631":0.0030474512452123206,"632":0.0030474512452123206,"633":0.04078023058900109,"634":0.02381081391447619,"635":0.02381081391447619,"636":0.04078023058900109,"637":0.02381081391447619,"638":0.02381081391447619,"639":0.04078023058900109,"640":0.02381081391447619,"641":0.02381081391447619,"645":0.007800746971236774,"646":0.0002966534321946623,"647":0.0002966534321946623,"648":0.007800746971236774,"649":0.0002966534321946623,"650":0.0002966534321946623,"651":0.007800746971236774,"652":0.0002966534321946623,"653":0.0002966534321946623,"654":0.0030195204397556554,"655":0.0030195204397556554,"656":0.0030195204397556554,"657":0.018274832248400756,"658":0.0037465407334585665,"659":0.0037465407334585665,"660":0.018274832248400756,"661":0.0037465407334585665,"662":0.0037465407334585665,"663":0.018274832248400756,"664":0.0037465407334585665,"665":0.0037465407334585665,"666":0.0006922574005930449,"667":0.0006922574005930449,"668":0.0006922574005930449,"670":0.0003178104550024761,"671":0.0003178104550024761,"673":0.0003178104550024761,"674":0.0003178104550024761,"676":0.0003178104550024761,"677":0.0003178104550024761,"678":0.16701934554880063,"680":0.16701934554880063,"681":0.3675576304640954,"683":0.2388304506358281,"684":0.3675576304640954,"685":0.2388304506358281,"686":0.2388304506358281,"687":0.3675576304640954,"688":0.2388304506358281,"690":0.0004527705778774983,"691":0.0004527705778774983,"692":0.0004527705778774983,"693":0.0018609420993462502,"694":0.000529425402033356,"695":0.000529425402033356,"696":0.0018609420993462502,"697":0.000529425402033356,"698":0.000529425402033356,"699":0.0018609420993462502,"700":0.000529425402033356,"701":0.000529425402033356,"702":0.0007901773812379639,"703":0.0007901773812379639,"704":0.0007901773812379639,"706":0.0009475266025804325,"707":0.0009475266025804325,"709":0.0009475266025804325,"710":0.0009475266025804325,"712":0.0009475266025804325,"713":0.0009475266025804325,"714":0.00409924371205514,"715":0.00409924371205514,"716":0.00409924371205514,"717":0.04083814451986711,"718":0.04953310329382551,"719":0.04953310329382551,"720":0.04083814451986711,"721":0.04953310329382551,"722":0.04953310329382551,"723":0.04083814451986711,"724":0.04953310329382551,"725":0.04953310329382551,"726":0.0029908316820879384,"727":0.0029908316820879384,"728":0.0029908316820879384,"729":0.00022219542970236157,"730":0.00006047497098036647,"731":0.00006047497098036647,"732":0.00022219542970236157,"733":0.00006047497098036647,"734":0.00006047497098036647,"735":0.00022219542970236157,"736":0.00006047497098036647,"737":0.00006047497098036647,"738":0.008698896014566831,"739":0.008698896014566831,"740":0.008698896014566831,"742":0.0045289590943960005,"743":0.0045289590943960005,"748":0.0045289590943960005,"749":0.0045289590943960005,"750":0.03233063192518338,"751":0.03233063192518338,"752":0.03233063192518338,"754":0.006998856076945357,"755":0.006998856076945357,"757":0.006998856076945357,"758":0.006998856076945357,"760":0.006998856076945357,"761":0.006998856076945357,"762":0.3483287424153809,"764":0.3483287424153809,"765":0.3499232358967429,"767":0.2217677653600171,"768":0.3499232358967429,"769":0.2217677653600171,"770":0.2217677653600171,"771":0.3499232358967429,"772":0.2217677653600171,"774":0.0005152231104359113,"775":0.0005152231104359113,"776":0.0005152231104359113,"777":0.0030094152459980107,"778":0.0005367834441138484,"779":0.0005367834441138484,"780":0.0030094152459980107,"781":0.0005367834441138484,"782":0.0005367834441138484,"783":0.0030094152459980107,"784":0.0005367834441138484,"785":0.0005367834441138484,"786":0.00002040722255716701,"787":0.00002040722255716701,"788":0.00002040722255716701,"790":0.00003310611244545319,"791":0.00003310611244545319,"793":0.00003310611244545319,"794":0.00003310611244545319,"796":0.00003310611244545319,"797":0.00003310611244545319,"798":0.40369471341084284,"800":0.40369471341084284,"801":0.4415931800954251,"803":0.47440803592978786,"804":0.4415931800954251,"805":0.47440803592978786,"806":0.47440803592978786,"807":0.4415931800954251,"808":0.47440803592978786,"810":0.0004787319351226661,"811":0.0004787319351226661,"812":0.0004787319351226661,"813":0.0014794577346610173,"814":0.0013774763128863005,"815":0.0013774763128863005,"816":0.0014794577346610173,"817":0.0013774763128863005,"818":0.0013774763128863005,"819":0.0014794577346610173,"820":0.0013774763128863005,"821":0.0013774763128863005,"825":0.00029443694607196954,"826":0.00004793336652863171,"827":0.00004793336652863171,"828":0.00029443694607196954,"829":0.00004793336652863171,"830":0.00004793336652863171,"831":0.00029443694607196954,"832":0.00004793336652863171,"833":0.00004793336652863171,"834":0.03596056163810267,"835":0.03596056163810267,"836":0.03596056163810267,"837":0.06569687195331413,"838":0.004401020723233402,"839":0.004401020723233402,"840":0.06569687195331413,"841":0.004401020723233402,"842":0.004401020723233402,"843":0.06569687195331413,"844":0.004401020723233402,"845":0.004401020723233402,"846":0.000016532703652382004,"847":0.000016532703652382004,"848":0.000016532703652382004,"850":0.00002358297829958692,"851":0.00002358297829958692,"853":0.00002358297829958692,"854":0.00002358297829958692,"856":0.00002358297829958692,"857":0.00002358297829958692,"858":0.00045576794621666024,"859":0.00045576794621666024,"860":0.00045576794621666024,"862":0.00022175510003141002,"863":0.00022175510003141002,"865":0.00022175510003141002,"866":0.00022175510003141002,"868":0.00022175510003141002,"869":0.00022175510003141002,"870":0.0011406242989401552,"871":0.0011406242989401552,"872":0.0011406242989401552,"874":0.0005004863375236905,"875":0.0005004863375236905,"877":0.0005004863375236905,"878":0.0005004863375236905,"880":0.0005004863375236905,"881":0.0005004863375236905,"882":0.015754054757866287,"883":0.015754054757866287,"884":0.015754054757866287,"885":0.005838382672054177,"886":0.0002962527042830031,"887":0.0002962527042830031,"888":0.005838382672054177,"889":0.0002962527042830031,"890":0.0002962527042830031,"891":0.005838382672054177,"892":0.0002962527042830031,"893":0.0002962527042830031,"894":0.0019459984229939454,"895":0.0019459984229939454,"896":0.0019459984229939454,"897":0.005880495072874394,"898":0.0009388016230434211,"899":0.0009388016230434211,"903":0.005880495072874394,"904":0.0009388016230434211,"905":0.0009388016230434211,"906":0.027077391216853954,"907":0.027077391216853954,"908":0.027077391216853954,"909":0.013043394194839323,"910":0.0005168328392178598,"911":0.0005168328392178598,"912":0.013043394194839323,"913":0.0005168328392178598,"914":0.0005168328392178598,"915":0.013043394194839323,"916":0.0005168328392178598,"917":0.0005168328392178598,"918":0.12052972358352178,"919":0.12052972358352178,"920":0.12052972358352178,"921":0.050092255665738654,"922":0.0006306111586236564,"923":0.0006306111586236564,"924":0.050092255665738654,"925":0.0006306111586236564,"926":0.0006306111586236564,"927":0.050092255665738654,"928":0.0006306111586236564,"929":0.0006306111586236564,"930":0.001081355511843873,"931":0.001081355511843873,"932":0.001081355511843873,"933":0.0004893070312524512,"934":0.000013595152254465118,"935":0.000013595152254465118,"936":0.0004893070312524512,"937":0.000013595152254465118,"938":0.000013595152254465118,"939":0.0004893070312524512,"940":0.000013595152254465118,"941":0.000013595152254465118,"942":0.00024047669167619496,"943":0.00024047669167619496,"944":0.00024047669167619496,"946":0.0003169714101660327,"947":0.0003169714101660327,"949":0.0003169714101660327,"950":0.0003169714101660327,"952":0.0003169714101660327,"953":0.0003169714101660327,"954":0.000003919329570846834,"955":0.000003919329570846834,"956":0.000003919329570846834,"957":0.000022874638921934116,"958":0.000020688175561616022,"959":0.000020688175561616022,"960":0.000022874638921934116,"961":0.000020688175561616022,"962":0.000020688175561616022,"963":0.000022874638921934116,"964":0.000020688175561616022,"965":0.000020688175561616022,"966":0.000024968632828230064,"967":0.000024968632828230064,"968":0.000024968632828230064,"969":0.00004783024148207433,"970":0.00011579216478304596,"971":0.00011579216478304596,"972":0.00004783024148207433,"973":0.00011579216478304596,"974":0.00011579216478304596,"975":0.00004783024148207433,"976":0.00011579216478304596,"977":0.00011579216478304596,"978":0.0013950922453805049,"979":0.0013950922453805049,"980":0.0013950922453805049,"982":0.00025607744010549036,"983":0.00025607744010549036,"985":0.00025607744010549036,"986":0.00025607744010549036,"988":0.00025607744010549036,"989":0.00025607744010549036,"990":0.00170989131527535,"991":0.00170989131527535,"992":0.00170989131527535,"994":0.0005582384334173601,"995":0.0005582384334173601,"997":0.0005582384334173601,"998":0.0005582384334173601,"1000":0.0005582384334173601,"1001":0.0005582384334173601,"1002":0.000011046185670591038,"1003":0.000011046185670591038,"1004":0.000011046185670591038,"1005":0.000022842500320451717,"1006":0.000001122086823875398,"1007":0.000001122086823875398,"1008":0.000022842500320451717,"1009":0.000001122086823875398,"1010":0.000001122086823875398,"1011":0.000022842500320451717,"1012":0.000001122086823875398,"1013":0.000001122086823875398,"1014":0.0007934643127078006,"1015":0.0007934643127078006,"1016":0.0007934643127078006,"1017":0.00022012150158395776,"1018":0.000021476127808871382,"1019":0.000021476127808871382,"1020":0.00022012150158395776,"1021":0.000021476127808871382,"1022":0.000021476127808871382,"1023":0.00022012150158395776,"1024":0.000021476127808871382,"1025":0.000021476127808871382,"1026":0.000005532593653027652,"1027":0.000005532593653027652,"1028":0.000005532593653027652,"1029":0.000007072154916172007,"1030":0.000006091243363295185,"1031":0.000006091243363295185,"1032":0.000007072154916172007,"1033":0.000006091243363295185,"1034":0.000006091243363295185,"1035":0.000007072154916172007,"1036":0.000006091243363295185,"1037":0.000006091243363295185,"1042":0.000026302050616228904,"1043":0.000026302050616228904,"1045":0.000026302050616228904,"1046":0.000026302050616228904,"1048":0.000026302050616228904,"1049":0.000026302050616228904,"1050":0.000041252768052827465,"1051":0.000041252768052827465,"1052":0.000041252768052827465,"1053":0.00022732836703371885,"1054":0.000004594138371874078,"1055":0.000004594138371874078,"1056":0.00022732836703371885,"1057":0.000004594138371874078,"1058":0.000004594138371874078,"1059":0.00022732836703371885,"1060":0.000004594138371874078,"1061":0.000004594138371874078,"1062":0.00009768825145736031,"1063":0.00009768825145736031,"1064":0.00009768825145736031,"1065":0.0004218276044980311,"1066":0.0010770625465218876,"1067":0.0010770625465218876,"1068":0.0004218276044980311,"1069":0.0010770625465218876,"1070":0.0010770625465218876,"1071":0.0004218276044980311,"1072":0.0010770625465218876,"1073":0.0010770625465218876,"1074":0.000030058978338109895,"1075":0.000030058978338109895,"1076":0.000030058978338109895,"1078":0.000030276271136595136,"1079":0.000030276271136595136,"1081":0.000030276271136595136,"1082":0.000030276271136595136,"1084":0.000030276271136595136,"1085":0.000030276271136595136,"1086":0.0005070185029431471,"1087":0.0005070185029431471,"1088":0.0005070185029431471,"1090":0.00026057677204131753,"1091":0.00026057677204131753,"1093":0.00026057677204131753,"1094":0.00026057677204131753,"1096":0.00026057677204131753,"1097":0.00026057677204131753,"1098":0.0009513082502356504,"1099":0.0009513082502356504,"1100":0.0009513082502356504,"1101":0.0016034140797313247,"1102":0.00015687384800360576,"1103":0.00015687384800360576,"1104":0.0016034140797313247,"1105":0.00015687384800360576,"1106":0.00015687384800360576,"1107":0.0016034140797313247,"1108":0.00015687384800360576,"1109":0.00015687384800360576,"1113":0.000003888192733348203,"1114":0.000003034300943187587,"1115":0.000003034300943187587,"1116":0.000003888192733348203,"1117":0.000003034300943187587,"1118":0.000003034300943187587,"1119":0.000003888192733348203,"1120":0.000003034300943187587,"1121":0.000003034300943187587,"1122":8.843730021877378e-7,"1123":8.843730021877378e-7,"1124":8.843730021877378e-7,"1125":0.0000050900163484493205,"1126":4.19734255094511e-7,"1127":4.19734255094511e-7,"1128":0.0000050900163484493205,"1129":4.19734255094511e-7,"1130":4.19734255094511e-7,"1131":0.0000050900163484493205,"1132":4.19734255094511e-7,"1133":4.19734255094511e-7,"1134":0.00017379238752090358,"1135":0.00017379238752090358,"1136":0.00017379238752090358,"1137":0.0009620554288967251,"1138":0.00003458656395763642,"1139":0.00003458656395763642,"1140":0.0009620554288967251,"1141":0.00003458656395763642,"1142":0.00003458656395763642,"1143":0.0009620554288967251,"1144":0.00003458656395763642,"1145":0.00003458656395763642,"1146":0.00001421211469718466,"1147":0.00001421211469718466,"1148":0.00001421211469718466,"1149":0.00005024115724715052,"1150":0.0000035676849230998277,"1151":0.0000035676849230998277,"1152":0.00005024115724715052,"1153":0.0000035676849230998277,"1154":0.0000035676849230998277,"1155":0.00005024115724715052,"1156":0.0000035676849230998277,"1157":0.0000035676849230998277,"1158":0.0005005685227035182,"1159":0.0005005685227035182,"1160":0.0005005685227035182,"1161":0.000610885186727457,"1162":0.00013777907737762027,"1163":0.00013777907737762027,"1167":0.000610885186727457,"1168":0.00013777907737762027,"1169":0.00013777907737762027,"1170":0.000006508268421441978,"1171":0.000006508268421441978,"1172":0.000006508268421441978,"1174":0.000011467503308561273,"1175":0.000011467503308561273,"1177":0.000011467503308561273,"1178":0.000011467503308561273,"1180":0.000011467503308561273,"1181":0.000011467503308561273,"1182":0.0000034395839164894277,"1183":0.0000034395839164894277,"1184":0.0000034395839164894277,"1185":0.000029977887096102485,"1186":0.000003852876601522613,"1187":0.000003852876601522613,"1188":0.000029977887096102485,"1189":0.000003852876601522613,"1190":0.000003852876601522613,"1191":0.000029977887096102485,"1192":0.000003852876601522613,"1193":0.000003852876601522613,"1194":0.00009290996448746452,"1195":0.00009290996448746452,"1196":0.00009290996448746452,"1197":0.0005048002614902352,"1198":0.000019658523433068116,"1199":0.000019658523433068116,"1200":0.0005048002614902352,"1201":0.000019658523433068116,"1202":0.000019658523433068116,"1203":0.0005048002614902352,"1204":0.000019658523433068116,"1205":0.000019658523433068116,"1206":9.024192607228001e-7,"1207":9.024192607228001e-7,"1208":9.024192607228001e-7,"1210":6.217190616772448e-7,"1211":6.217190616772448e-7,"1213":6.217190616772448e-7,"1214":6.217190616772448e-7,"1216":6.217190616772448e-7,"1217":6.217190616772448e-7,"1218":0.000004967330282889886,"1219":0.000004967330282889886,"1220":0.000004967330282889886,"1222":0.000005797896871792869,"1223":0.000005797896871792869,"1225":0.000005797896871792869,"1226":0.000005797896871792869,"1228":0.000005797896871792869,"1229":0.000005797896871792869,"1230":0.000001850802587230886,"1231":0.000001850802587230886,"1232":0.000001850802587230886,"1233":0.000020007187143085723,"1234":4.480761994558313e-7,"1235":4.480761994558313e-7,"1236":0.000020007187143085723,"1237":4.480761994558313e-7,"1238":4.480761994558313e-7,"1239":0.000020007187143085723,"1240":4.480761994558313e-7,"1241":4.480761994558313e-7,"1242":0.000013634775451618815,"1243":0.000013634775451618815,"1244":0.000013634775451618815,"1245":0.000051093183727594716,"1246":0.0000023837969157078403,"1247":0.0000023837969157078403,"1248":0.000051093183727594716,"1249":0.0000023837969157078403,"1250":0.0000023837969157078403,"1251":0.000051093183727594716,"1252":0.0000023837969157078403,"1253":0.0000023837969157078403,"1257":0.000009205688955124314,"1258":6.640993372889273e-7,"1259":6.640993372889273e-7,"1260":0.000009205688955124314,"1261":6.640993372889273e-7,"1262":6.640993372889273e-7,"1263":0.000009205688955124314,"1264":6.640993372889273e-7,"1265":6.640993372889273e-7,"1266":0.000001696289678226349,"1267":0.000001696289678226349,"1268":0.000001696289678226349,"1270":0.0000016604222225319493,"1271":0.0000016604222225319493,"1273":0.0000016604222225319493,"1274":0.0000016604222225319493,"1276":0.0000016604222225319493,"1277":0.0000016604222225319493,"1278":0.000005470823334527543,"1279":0.000005470823334527543,"1280":0.000005470823334527543,"1281":0.000047711923562016046,"1282":0.000001776845321494145,"1283":0.000001776845321494145,"1284":0.000047711923562016046,"1285":0.000001776845321494145,"1286":0.000001776845321494145,"1287":0.000047711923562016046,"1288":0.000001776845321494145,"1289":0.000001776845321494145,"1290":0.000014312015122188303,"1291":0.000014312015122188303,"1292":0.000014312015122188303,"1294":0.000004765576578679676,"1295":0.000004765576578679676,"1300":0.000004765576578679676,"1301":0.000004765576578679676,"1302":0.000016928331602615688,"1303":0.000016928331602615688,"1304":0.000016928331602615688,"1305":0.000018228976422452464,"1306":0.000009700643182198619,"1307":0.000009700643182198619,"1311":0.000018228976422452464,"1312":0.000009700643182198619,"1313":0.000009700643182198619,"1314":1.416543277381464e-7,"1315":1.416543277381464e-7,"1316":1.416543277381464e-7,"1317":0.000001278197057719208,"1318":4.073627117581594e-8,"1319":4.073627117581594e-8,"1320":0.000001278197057719208,"1321":4.073627117581594e-8,"1322":4.073627117581594e-8,"1323":0.000001278197057719208,"1324":4.073627117581594e-8,"1325":4.073627117581594e-8},"8":{"0":0.0000073633185888576145,"1":0.0000073633185888576145,"2":0.0000073633185888576145,"3":0.000006023242943021939,"4":0.000006023242943021939,"5":0.000006023242943021939,"6":0.00019162470730578807,"7":0.00019162470730578807,"8":0.00019162470730578807,"9":0.00024775190683387204,"10":0.00024775190683387204,"11":0.00024775190683387204,"12":0.00010999486953820437,"13":0.00010999486953820437,"14":0.00010999486953820437,"15":0.00009340991139977183,"16":0.00009340991139977183,"17":0.00009340991139977183,"18":0.00002667292350792051,"19":5.108525715512573e-7,"20":0.000003998907145310265,"21":5.108525715512573e-7,"22":0.000014866700775304687,"23":0.000014866700775304687,"24":0.000014866700775304687,"25":0.00001157544637509865,"26":0.00001157544637509865,"27":0.00001157544637509865,"28":0.0012741351305970625,"29":0.000040954450783162955,"30":0.00023997027799502874,"31":0.000040954450783162955,"32":0.0006301456289864832,"33":0.000011437314349914433,"34":0.00017662646729075886,"35":0.000011437314349914433,"36":0.00013699815696521968,"37":0.00013699815696521968,"38":0.00013699815696521968,"39":0.00010027653955020405,"40":0.00010027653955020405,"41":0.00010027653955020405,"42":0.0002436725251707376,"43":0.000029258525206904785,"44":0.00020786064461791805,"45":0.000029258525206904785,"46":0.001347758576895687,"47":0.000013638397355171154,"48":0.0002705462055312291,"49":0.000013638397355171154,"50":0.021533790003374475,"51":0.000002273513109846617,"52":0.00011531367763452309,"53":0.000002273513109846617,"54":0.002981940951358301,"55":0.000006071426871645904,"56":0.00014043018239217925,"57":0.000006071426871645904,"58":0.007825502892221742,"59":0.000008826623471111754,"60":0.0009310988276073917,"61":0.000008826623471111754,"62":0.00004810735526919249,"63":0.00004810735526919249,"64":0.00004810735526919249,"65":0.000044756352965356477,"66":0.000044756352965356477,"67":0.000044756352965356477,"68":0.0023998939875541055,"69":0.00006977087699026629,"70":0.000506037954718478,"71":0.00006977087699026629,"72":0.0013678274761558969,"73":0.000026337614205613438,"74":0.0008429676728548556,"75":0.000026337614205613438,"76":0.0006591156066557816,"78":0.0006591156066557816,"80":0.00030720206724063,"82":0.01523206815637095,"83":0.08626852356811679,"84":0.10737492343213367,"85":0.08626852356811679,"86":0.000008791401810457754,"87":0.000008791401810457754,"88":0.000008791401810457754,"89":0.00001444097010993396,"90":0.0000011230843976159062,"91":0.0000011230843976159062,"92":0.00001444097010993396,"93":0.0000011230843976159062,"94":0.0000011230843976159062,"95":0.00001444097010993396,"96":0.0000011230843976159062,"97":0.0000011230843976159062,"98":0.020897172607136794,"99":0.000005266754847916998,"100":0.0005788610789340991,"101":0.000005266754847916998,"102":0.006663249593637265,"103":0.006663249593637265,"104":0.006663249593637265,"105":0.007257462634930087,"106":0.007257462634930087,"107":0.007257462634930087,"108":0.02237848115019853,"109":0.004944388435093564,"111":0.004944388435093564,"112":0.004442111445590653,"113":0.0000186336970993778,"114":0.0014219755607051785,"115":0.0000186336970993778,"119":0.009309130666790245,"120":0.009309130666790245,"121":0.009309130666790245,"122":0.00003721752191186189,"123":2.453545056051119e-7,"124":0.000001199810902261654,"125":2.453545056051119e-7,"126":0.0011111710367597432,"127":0.000017766033615730834,"128":0.0006463604419933765,"129":0.000017766033615730834,"130":0.030070730607287315,"131":0.002256712796858763,"133":0.002256712796858763,"134":0.00000474904932569648,"135":0.00000474904932569648,"136":0.00000474904932569648,"137":0.000002149798624221778,"138":0.000002149798624221778,"139":0.000002149798624221778,"140":0.0002417818537470475,"141":0.0001175114435676867,"142":0.0017234769528193903,"143":0.0001175114435676867,"144":0.003720138236464361,"145":0.0030415906320456656,"146":0.0033547805073443223,"147":0.0030415906320456656,"148":0.00033651153579947646,"149":0.00033651153579947646,"150":0.00033651153579947646,"151":0.000053568478303463635,"152":0.000053568478303463635,"153":0.000053568478303463635,"154":0.008939013644986346,"155":0.001752024862393288,"157":0.001752024862393288,"158":0.023265571110000386,"159":0.00437344502615498,"161":0.00437344502615498,"165":9.060019833065035e-7,"166":9.060019833065035e-7,"167":9.060019833065035e-7,"169":0.002620802482654085,"170":0.0015573195872036903,"171":0.002620802482654085,"172":0.00002344859740243328,"173":0.00002344859740243328,"174":0.00002344859740243328,"175":0.0000022666086092451354,"176":0.0000022666086092451354,"177":0.0000022666086092451354,"178":0.000011087548989854101,"179":0.000011087548989854101,"180":0.000011087548989854101,"181":0.000024723531155941154,"182":0.0000018922530040170007,"183":0.0000018922530040170007,"184":0.000024723531155941154,"185":0.0000018922530040170007,"186":0.0000018922530040170007,"187":0.000024723531155941154,"188":0.0000018922530040170007,"189":0.0000018922530040170007,"190":0.000222758375237474,"191":0.000002298084438686067,"192":0.00031894639173204737,"193":0.000002298084438686067,"194":0.013568579062683345,"195":0.0016835474699774323,"197":0.0016835474699774323,"199":0.0007552217858150978,"200":0.0007643781699967775,"201":0.0007552217858150978,"203":0.0008556278245640905,"204":0.0009191422939863545,"205":0.0008556278245640905,"206":0.002600805962286779,"207":0.015385398459844645,"208":0.004089502999937761,"209":0.015385398459844645,"210":0.0017396406078770729,"211":0.0003818484638608253,"212":0.003405474648215625,"213":0.0003818484638608253,"214":0.00012346196209822344,"215":0.00012346196209822344,"216":0.00012346196209822344,"217":0.00037777964828677215,"218":0.000007994686710514777,"219":0.000007994686710514777,"220":0.00037777964828677215,"221":0.000007994686710514777,"222":0.000007994686710514777,"223":0.00037777964828677215,"224":0.000007994686710514777,"225":0.000007994686710514777,"226":0.000351900990685525,"227":3.594170869588339e-7,"228":0.000005610753235232384,"229":3.594170869588339e-7,"230":0.02730515495266841,"231":0.0010792011205389208,"233":0.0010792011205389208,"235":0.0354361803813563,"237":0.0354361803813563,"238":0.013909733646494183,"239":0.000633098043212024,"241":0.000633098043212024,"243":0.0009039504348007306,"244":0.0007412268106412219,"245":0.0009039504348007306,"246":0.0014862984868499218,"247":0.006838746768313225,"248":0.0015032093969160694,"249":0.006838746768313225,"250":0.0044688250093201515,"251":0.02532164524779764,"252":0.12988739919342568,"253":0.02532164524779764,"255":0.0010157166033509222,"256":0.0011981872112598985,"257":0.0010157166033509222,"259":0.0010408667845421343,"260":0.0005542380950182096,"261":0.0010408667845421343,"262":0.0005467862839550991,"263":0.000011271709395169324,"264":0.0013852302052291805,"265":0.000011271709395169324,"266":0.0000012179910260870952,"267":0.0000012179910260870952,"268":0.0000012179910260870952,"269":6.332966971622992e-7,"270":1.7144477351188367e-7,"271":1.7144477351188367e-7,"272":6.332966971622992e-7,"273":1.7144477351188367e-7,"274":1.7144477351188367e-7,"275":6.332966971622992e-7,"276":1.7144477351188367e-7,"277":1.7144477351188367e-7,"278":0.00018271001164982736,"279":0.00018271001164982736,"280":0.00018271001164982736,"281":0.00017300579655114685,"282":0.000009210521858014599,"283":0.000009210521858014599,"284":0.00017300579655114685,"285":0.000009210521858014599,"286":0.000009210521858014599,"287":0.00017300579655114685,"288":0.000009210521858014599,"289":0.000009210521858014599,"291":0.002304768369963578,"292":0.0028307087187712564,"293":0.002304768369963578,"294":0.00013128440125528007,"295":0.00013128440125528007,"296":0.00013128440125528007,"297":0.00026577103215608215,"298":0.000005676013717501526,"299":0.000005676013717501526,"300":0.00026577103215608215,"301":0.000005676013717501526,"302":0.000005676013717501526,"303":0.00026577103215608215,"304":0.000005676013717501526,"305":0.000005676013717501526,"307":0.0015841757211250294,"308":0.001396876448447592,"309":0.0015841757211250294,"310":0.00011770020464120489,"311":0.00011770020464120489,"312":0.00011770020464120489,"313":0.00005688861128314264,"314":0.000002320565641237478,"315":0.000002320565641237478,"316":0.00005688861128314264,"317":0.000002320565641237478,"318":0.000002320565641237478,"319":0.00005688861128314264,"320":0.000002320565641237478,"321":0.000002320565641237478,"322":0.001506211648332414,"323":1.020924735927387e-7,"324":0.000003505601806260497,"325":1.020924735927387e-7,"327":0.0001589589839914822,"328":0.00047895333422723476,"329":0.0001589589839914822,"330":0.0003393308068298828,"331":0.000002749296611812165,"332":0.0007115260464168862,"333":0.000002749296611812165,"334":0.000884802394805006,"335":0.000884802394805006,"336":0.000884802394805006,"337":0.0002522120452190605,"338":0.000008387742905176175,"339":0.000008387742905176175,"340":0.0002522120452190605,"341":0.000008387742905176175,"342":0.000008387742905176175,"343":0.0002522120452190605,"344":0.000008387742905176175,"345":0.000008387742905176175,"346":0.035654649615783025,"347":0.007985136979149033,"349":0.007985136979149033,"350":0.0014259232103285653,"351":5.460838796135377e-7,"352":0.0001221182558314535,"353":5.460838796135377e-7,"354":0.0005028085014445989,"355":0.0005028085014445989,"356":0.0005028085014445989,"357":0.00019148108663293248,"358":0.000015709708399020242,"359":0.000015709708399020242,"360":0.00019148108663293248,"361":0.000015709708399020242,"362":0.000015709708399020242,"363":0.00019148108663293248,"364":0.000015709708399020242,"365":0.000015709708399020242,"366":0.000025901793578074004,"367":0.000025901793578074004,"368":0.000025901793578074004,"369":0.00001509057157778335,"370":0.0000035712555485456774,"371":0.0000035712555485456774,"372":0.00001509057157778335,"373":0.0000035712555485456774,"374":0.0000035712555485456774,"375":0.00001509057157778335,"376":0.0000035712555485456774,"377":0.0000035712555485456774,"378":0.0005032036716850292,"379":3.272578200839253e-7,"380":0.00004373793739538156,"381":3.272578200839253e-7,"383":0.0023364535463524403,"384":0.0011912180085932235,"385":0.0023364535463524403,"386":0.00045286121330668133,"387":1.9131540176210814e-7,"388":0.0000038216465260514195,"389":1.9131540176210814e-7,"390":0.002666008360496554,"391":0.0001845899504357282,"392":0.01741877774944674,"393":0.0001845899504357282,"395":0.00047145208245878673,"396":0.000869205541023265,"397":0.00047145208245878673,"398":0.0013196671406218562,"399":0.0000020823776588611727,"400":0.000038024560674439406,"401":0.0000020823776588611727,"403":0.00036517423849365333,"404":0.00024441039939978915,"405":0.00036517423849365333,"407":0.017639534251872063,"408":0.03618553531668617,"409":0.017639534251872063,"410":0.0012819488669577807,"411":4.02020386632083e-7,"412":0.000014330318978271634,"413":4.02020386632083e-7,"414":0.0030651349426026667,"415":6.298369237583607e-8,"416":0.0000010408848460642487,"417":6.298369237583607e-8,"418":0.0013617589770117393,"419":4.640889915476408e-7,"420":0.000006103368325500293,"421":4.640889915476408e-7,"423":0.0015336691435101051,"424":0.0009832745338439442,"425":0.0015336691435101051,"426":0.0012378965275054755,"427":0.0011282130482917407,"428":0.007763280441293271,"429":0.0011282130482917407,"431":0.0004223308356928778,"432":0.0004989426672033979,"433":0.0004223308356928778,"434":0.003101531655013466,"435":4.018676837130899e-8,"436":3.835078888477772e-7,"437":4.018676837130899e-8,"439":0.0002033034166873991,"440":0.0008903590509682293,"441":0.0002033034166873991,"442":0.0011557072875289403,"443":3.6273521024846574e-8,"444":2.552121683083595e-7,"445":3.6273521024846574e-8,"446":0.10714414376811718,"447":0.10714414376811718,"448":0.10714414376811718,"449":0.04026414765779364,"450":0.08608310764186626,"451":0.08608310764186626,"452":0.04026414765779364,"453":0.08608310764186626,"454":0.08608310764186626,"455":0.04026414765779364,"456":0.08608310764186626,"457":0.08608310764186626,"458":0.0029368982905664505,"459":4.007316509877429e-8,"460":1.9085063985700375e-7,"461":4.007316509877429e-8,"462":0.07273044423066151,"463":0.00351258383724941,"465":0.00351258383724941,"466":0.0021837200388323086,"467":6.7483469207419096e-9,"468":5.221904587591681e-8,"469":6.7483469207419096e-9,"471":0.00507672054284262,"472":0.0020636967427335407,"473":0.00507672054284262,"474":0.0020035604409025408,"475":1.6760629777799437e-8,"476":1.7554819073482427e-7,"477":1.6760629777799437e-8,"479":0.004866148981813987,"480":0.004240996404783495,"481":0.004866148981813987,"482":0.000812463877662781,"483":7.622976725683616e-9,"484":2.4162483781000208e-8,"485":7.622976725683616e-9,"486":0.0005803717074695057,"487":0.0005803717074695057,"488":0.0005803717074695057,"489":0.0002007094652069769,"490":0.000005280499268559174,"491":0.000005280499268559174,"492":0.0002007094652069769,"493":0.000005280499268559174,"494":0.000005280499268559174,"495":0.0002007094652069769,"496":0.000005280499268559174,"497":0.000005280499268559174,"499":0.0008621418184723177,"500":0.0014562186112718257,"501":0.0008621418184723177,"502":0.002362684746797351,"503":8.728232457081473e-10,"504":1.379110252548061e-8,"505":8.728232457081473e-10,"507":0.001934945067228811,"508":0.0037686320522447364,"509":0.001934945067228811,"510":0.004509692781500802,"511":9.686906509270522e-9,"512":4.608862012152077e-8,"513":9.686906509270522e-9,"515":0.001203760552438978,"516":0.0014691837171932247,"517":0.001203760552438978,"518":0.001130932093088435,"519":1.8859118726103097e-8,"520":5.246233088464374e-8,"521":1.8859118726103097e-8,"523":0.021592489309321925,"525":0.021592489309321925,"526":0.001387139133857114,"527":0.001387139133857114,"528":0.001387139133857114,"529":0.00032595592027496626,"530":0.000018177197393018888,"531":0.000018177197393018888,"532":0.00032595592027496626,"533":0.000018177197393018888,"534":0.000018177197393018888,"535":0.00032595592027496626,"536":0.000018177197393018888,"537":0.000018177197393018888,"538":0.0000057924050232501304,"539":0.0000057924050232501304,"540":0.0000057924050232501304,"541":0.000021851267793223463,"542":0.0000011845138830336864,"543":0.0000011845138830336864,"544":0.000021851267793223463,"545":0.0000011845138830336864,"546":0.0000011845138830336864,"547":0.000021851267793223463,"548":0.0000011845138830336864,"549":0.0000011845138830336864,"550":0.005491396728419956,"552":0.005491396728419956,"553":0.020891982631210965,"555":0.005019734800802436,"556":0.020891982631210965,"557":0.005019734800802436,"558":0.005019734800802436,"559":0.020891982631210965,"560":0.005019734800802436,"562":0.01838696747490489,"563":0.0020724779756986626,"565":0.0020724779756986626,"566":0.014001878251565408,"568":0.014001878251565408,"569":0.0102787564137521,"571":0.002247721497910696,"572":0.0102787564137521,"573":0.002247721497910696,"574":0.002247721497910696,"575":0.0102787564137521,"576":0.002247721497910696,"578":0.0003634889381089448,"579":0.0003634889381089448,"580":0.0003634889381089448,"581":0.00010187851936724876,"582":0.000009990952839678875,"583":0.000009990952839678875,"584":0.00010187851936724876,"585":0.000009990952839678875,"586":0.000009990952839678875,"587":0.00010187851936724876,"588":0.000009990952839678875,"589":0.000009990952839678875,"590":0.00008799929542041337,"591":2.6223499579625606e-10,"592":9.961006938075461e-10,"593":2.6223499579625606e-10,"594":0.0015423010912771046,"595":0.0015423010912771046,"596":0.0015423010912771046,"597":0.0017959952024393887,"598":0.0013983175771865113,"599":0.0013983175771865113,"600":0.0017959952024393887,"601":0.0013983175771865113,"602":0.0013983175771865113,"603":0.0017959952024393887,"604":0.0013983175771865113,"605":0.0013983175771865113,"606":0.00579412502251251,"607":0.00579412502251251,"608":0.00579412502251251,"609":0.0037789030433816304,"610":0.004417253338545128,"611":0.004417253338545128,"615":0.0037789030433816304,"616":0.004417253338545128,"617":0.004417253338545128,"618":0.0005088511469166486,"620":0.0005088511469166486,"621":0.00030692779109841206,"623":0.00006729836258481041,"624":0.00030692779109841206,"625":0.00006729836258481041,"626":0.00006729836258481041,"627":0.00030692779109841206,"628":0.00006729836258481041,"630":0.00006843022893244781,"631":0.00006843022893244781,"632":0.00006843022893244781,"633":0.00002284725027381077,"634":0.0000046657629928642886,"635":0.0000046657629928642886,"636":0.00002284725027381077,"637":0.0000046657629928642886,"638":0.0000046657629928642886,"639":0.00002284725027381077,"640":0.0000046657629928642886,"641":0.0000046657629928642886,"645":0.0011315514784639986,"646":0.0028251999457058704,"647":0.0028251999457058704,"648":0.0011315514784639986,"649":0.0028251999457058704,"650":0.0028251999457058704,"651":0.0011315514784639986,"652":0.0028251999457058704,"653":0.0028251999457058704,"654":0.00001779972853333921,"655":0.00001779972853333921,"656":0.00001779972853333921,"657":0.000010850863914004463,"658":1.2825126797379944e-7,"659":1.2825126797379944e-7,"660":0.000010850863914004463,"661":1.2825126797379944e-7,"662":1.2825126797379944e-7,"663":0.000010850863914004463,"664":1.2825126797379944e-7,"665":1.2825126797379944e-7,"666":0.002112613632847593,"667":0.002112613632847593,"668":0.002112613632847593,"670":0.001966628038601237,"671":0.001966628038601237,"673":0.001966628038601237,"674":0.001966628038601237,"676":0.001966628038601237,"677":0.001966628038601237,"678":0.0018584892348130877,"680":0.0018584892348130877,"681":0.008125254305977749,"683":0.0016792428249518346,"684":0.008125254305977749,"685":0.0016792428249518346,"686":0.0016792428249518346,"687":0.008125254305977749,"688":0.0016792428249518346,"690":0.004117914368821869,"691":0.004117914368821869,"692":0.004117914368821869,"693":0.0038606568008253996,"694":0.015492286810599805,"695":0.015492286810599805,"696":0.0038606568008253996,"697":0.015492286810599805,"698":0.015492286810599805,"699":0.0038606568008253996,"700":0.015492286810599805,"701":0.015492286810599805,"702":0.0010000927323171509,"703":0.0010000927323171509,"704":0.0010000927323171509,"706":0.0009881127548219274,"707":0.0009881127548219274,"709":0.0009881127548219274,"710":0.0009881127548219274,"712":0.0009881127548219274,"713":0.0009881127548219274,"714":0.00004584227563256528,"715":0.00004584227563256528,"716":0.00004584227563256528,"717":0.000008878594524209658,"718":0.00000514019463905028,"719":0.00000514019463905028,"720":0.000008878594524209658,"721":0.00000514019463905028,"722":0.00000514019463905028,"723":0.000008878594524209658,"724":0.00000514019463905028,"725":0.00000514019463905028,"726":7.792530322988017e-7,"727":7.792530322988017e-7,"728":7.792530322988017e-7,"729":0.000004182915752220707,"730":4.991787076179858e-8,"731":4.991787076179858e-8,"732":0.000004182915752220707,"733":4.991787076179858e-8,"734":4.991787076179858e-8,"735":0.000004182915752220707,"736":4.991787076179858e-8,"737":4.991787076179858e-8,"738":0.10369305213004025,"739":0.10369305213004025,"740":0.10369305213004025,"742":0.04111151769064899,"743":0.04111151769064899,"748":0.04111151769064899,"749":0.04111151769064899,"750":0.00015378295692806423,"751":0.00015378295692806423,"752":0.00015378295692806423,"754":0.0001875433656532321,"755":0.0001875433656532321,"757":0.0001875433656532321,"758":0.0001875433656532321,"760":0.0001875433656532321,"761":0.0001875433656532321,"762":0.006001169597993455,"764":0.006001169597993455,"765":0.009286343632237048,"767":0.0010699656440365994,"768":0.009286343632237048,"769":0.0010699656440365994,"770":0.0010699656440365994,"771":0.009286343632237048,"772":0.0010699656440365994,"774":0.00017560578931355672,"775":0.00017560578931355672,"776":0.00017560578931355672,"777":0.003188097716240878,"778":0.000798906344404812,"779":0.000798906344404812,"780":0.003188097716240878,"781":0.000798906344404812,"782":0.000798906344404812,"783":0.003188097716240878,"784":0.000798906344404812,"785":0.000798906344404812,"786":0.000569580890620038,"787":0.000569580890620038,"788":0.000569580890620038,"790":0.0004828400454598816,"791":0.0004828400454598816,"793":0.0004828400454598816,"794":0.0004828400454598816,"796":0.0004828400454598816,"797":0.0004828400454598816,"798":0.00425018761619452,"800":0.00425018761619452,"801":0.00326469800271248,"803":0.0005264623839110739,"804":0.00326469800271248,"805":0.0005264623839110739,"806":0.0005264623839110739,"807":0.00326469800271248,"808":0.0005264623839110739,"810":0.12961512465928612,"811":0.12961512465928612,"812":0.12961512465928612,"813":0.08969710593902554,"814":0.025268565124503893,"815":0.025268565124503893,"816":0.08969710593902554,"817":0.025268565124503893,"818":0.025268565124503893,"819":0.08969710593902554,"820":0.025268565124503893,"821":0.025268565124503893,"825":0.00000889009074527818,"826":0.000013793773221392408,"827":0.000013793773221392408,"828":0.00000889009074527818,"829":0.000013793773221392408,"830":0.000013793773221392408,"831":0.00000889009074527818,"832":0.000013793773221392408,"833":0.000013793773221392408,"834":0.001350436505514655,"835":0.001350436505514655,"836":0.001350436505514655,"837":0.00008994533356717702,"838":0.000010988590769482098,"839":0.000010988590769482098,"840":0.00008994533356717702,"841":0.000010988590769482098,"842":0.000010988590769482098,"843":0.00008994533356717702,"844":0.000010988590769482098,"845":0.000010988590769482098,"846":4.131769615925729e-8,"847":4.131769615925729e-8,"848":4.131769615925729e-8,"850":3.364094602745206e-8,"851":3.364094602745206e-8,"853":3.364094602745206e-8,"854":3.364094602745206e-8,"856":3.364094602745206e-8,"857":3.364094602745206e-8,"858":0.0013870401863093104,"859":0.0013870401863093104,"860":0.0013870401863093104,"862":0.001573020570157022,"863":0.001573020570157022,"865":0.001573020570157022,"866":0.001573020570157022,"868":0.001573020570157022,"869":0.001573020570157022,"870":0.000419539725982737,"871":0.000419539725982737,"872":0.000419539725982737,"874":0.0001392403055171978,"875":0.0001392403055171978,"877":0.0001392403055171978,"878":0.0001392403055171978,"880":0.0001392403055171978,"881":0.0001392403055171978,"882":0.0000031756529112862386,"883":0.0000031756529112862386,"884":0.0000031756529112862386,"885":0.00000408895197116211,"886":9.248348183932399e-8,"887":9.248348183932399e-8,"888":0.00000408895197116211,"889":9.248348183932399e-8,"890":9.248348183932399e-8,"891":0.00000408895197116211,"892":9.248348183932399e-8,"893":9.248348183932399e-8,"894":6.236738402627382e-7,"895":6.236738402627382e-7,"896":6.236738402627382e-7,"897":6.06513830349662e-7,"898":1.7161203691486002e-7,"899":1.7161203691486002e-7,"903":6.06513830349662e-7,"904":1.7161203691486002e-7,"905":1.7161203691486002e-7,"906":0.0007166801098704783,"907":0.0007166801098704783,"908":0.0007166801098704783,"909":0.00002551168297985512,"910":0.000002769211623021359,"911":0.000002769211623021359,"912":0.00002551168297985512,"913":0.000002769211623021359,"914":0.000002769211623021359,"915":0.00002551168297985512,"916":0.000002769211623021359,"917":0.000002769211623021359,"918":0.00011880060996954867,"919":0.00011880060996954867,"920":0.00011880060996954867,"921":0.000014504954395445468,"922":5.312481541020851e-7,"923":5.312481541020851e-7,"924":0.000014504954395445468,"925":5.312481541020851e-7,"926":5.312481541020851e-7,"927":0.000014504954395445468,"928":5.312481541020851e-7,"929":5.312481541020851e-7,"930":0.00007754166167521307,"931":0.00007754166167521307,"932":0.00007754166167521307,"933":0.000030725108337242336,"934":5.801854563035486e-7,"935":5.801854563035486e-7,"936":0.000030725108337242336,"937":5.801854563035486e-7,"938":5.801854563035486e-7,"939":0.000030725108337242336,"940":5.801854563035486e-7,"941":5.801854563035486e-7,"942":0.0011401484204104735,"943":0.0011401484204104735,"944":0.0011401484204104735,"946":0.0022362857184992846,"947":0.0022362857184992846,"949":0.0022362857184992846,"950":0.0022362857184992846,"952":0.0022362857184992846,"953":0.0022362857184992846,"954":0.0000033089829936729995,"955":0.0000033089829936729995,"956":0.0000033089829936729995,"957":6.862663999280673e-7,"958":3.506589357649775e-8,"959":3.506589357649775e-8,"960":6.862663999280673e-7,"961":3.506589357649775e-8,"962":3.506589357649775e-8,"963":6.862663999280673e-7,"964":3.506589357649775e-8,"965":3.506589357649775e-8,"966":4.523282509093668e-10,"967":4.523282509093668e-10,"968":4.523282509093668e-10,"969":1.0310351680501704e-8,"970":2.4771311685359872e-11,"971":2.4771311685359872e-11,"972":1.0310351680501704e-8,"973":2.4771311685359872e-11,"974":2.4771311685359872e-11,"975":1.0310351680501704e-8,"976":2.4771311685359872e-11,"977":2.4771311685359872e-11,"978":0.0005303766301294315,"979":0.0005303766301294315,"980":0.0005303766301294315,"982":0.00028767323142881514,"983":0.00028767323142881514,"985":0.00028767323142881514,"986":0.00028767323142881514,"988":0.00028767323142881514,"989":0.00028767323142881514,"990":0.0004902472136962087,"991":0.0004902472136962087,"992":0.0004902472136962087,"994":0.0007324796873405984,"995":0.0007324796873405984,"997":0.0007324796873405984,"998":0.0007324796873405984,"1000":0.0007324796873405984,"1001":0.0007324796873405984,"1002":0.0000035360142771441584,"1003":0.0000035360142771441584,"1004":0.0000035360142771441584,"1005":0.00000702659471093438,"1006":1.770163691112868e-7,"1007":1.770163691112868e-7,"1008":0.00000702659471093438,"1009":1.770163691112868e-7,"1010":1.770163691112868e-7,"1011":0.00000702659471093438,"1012":1.770163691112868e-7,"1013":1.770163691112868e-7,"1014":0.000010497903074516334,"1015":0.000010497903074516334,"1016":0.000010497903074516334,"1017":7.005480703246565e-7,"1018":2.945064278919634e-7,"1019":2.945064278919634e-7,"1020":7.005480703246565e-7,"1021":2.945064278919634e-7,"1022":2.945064278919634e-7,"1023":7.005480703246565e-7,"1024":2.945064278919634e-7,"1025":2.945064278919634e-7,"1026":5.3437650246485456e-11,"1027":5.3437650246485456e-11,"1028":5.3437650246485456e-11,"1029":1.6301627941782166e-9,"1030":4.063301424879045e-12,"1031":4.063301424879045e-12,"1032":1.6301627941782166e-9,"1033":4.063301424879045e-12,"1034":4.063301424879045e-12,"1035":1.6301627941782166e-9,"1036":4.063301424879045e-12,"1037":4.063301424879045e-12,"1042":5.266053410626558e-7,"1043":5.266053410626558e-7,"1045":5.266053410626558e-7,"1046":5.266053410626558e-7,"1048":5.266053410626558e-7,"1049":5.266053410626558e-7,"1050":5.321849142955481e-7,"1051":5.321849142955481e-7,"1052":5.321849142955481e-7,"1053":2.1502164564645254e-7,"1054":3.2202381517794257e-8,"1055":3.2202381517794257e-8,"1056":2.1502164564645254e-7,"1057":3.2202381517794257e-8,"1058":3.2202381517794257e-8,"1059":2.1502164564645254e-7,"1060":3.2202381517794257e-8,"1061":3.2202381517794257e-8,"1062":2.818969167144566e-7,"1063":2.818969167144566e-7,"1064":2.818969167144566e-7,"1065":2.3653602831227968e-7,"1066":4.0967189336455095e-8,"1067":4.0967189336455095e-8,"1068":2.3653602831227968e-7,"1069":4.0967189336455095e-8,"1070":4.0967189336455095e-8,"1071":2.3653602831227968e-7,"1072":4.0967189336455095e-8,"1073":4.0967189336455095e-8,"1074":0.000290837350427159,"1075":0.000290837350427159,"1076":0.000290837350427159,"1078":0.00045363553593381456,"1079":0.00045363553593381456,"1081":0.00045363553593381456,"1082":0.00045363553593381456,"1084":0.00045363553593381456,"1085":0.00045363553593381456,"1086":0.00043456538607752996,"1087":0.00043456538607752996,"1088":0.00043456538607752996,"1090":0.0003678385809215705,"1091":0.0003678385809215705,"1093":0.0003678385809215705,"1094":0.0003678385809215705,"1096":0.0003678385809215705,"1097":0.0003678385809215705,"1098":7.711111704796931e-10,"1099":7.711111704796931e-10,"1100":7.711111704796931e-10,"1101":8.410050883612965e-9,"1102":8.080268202487068e-11,"1103":8.080268202487068e-11,"1104":8.410050883612965e-9,"1105":8.080268202487068e-11,"1106":8.080268202487068e-11,"1107":8.410050883612965e-9,"1108":8.080268202487068e-11,"1109":8.080268202487068e-11,"1113":1.728338554664944e-8,"1114":4.1054320837146996e-10,"1115":4.1054320837146996e-10,"1116":1.728338554664944e-8,"1117":4.1054320837146996e-10,"1118":4.1054320837146996e-10,"1119":1.728338554664944e-8,"1120":4.1054320837146996e-10,"1121":4.1054320837146996e-10,"1122":1.783727946152969e-10,"1123":1.783727946152969e-10,"1124":1.783727946152969e-10,"1125":6.979633564129145e-9,"1126":2.5352275946031684e-11,"1127":2.5352275946031684e-11,"1128":6.979633564129145e-9,"1129":2.5352275946031684e-11,"1130":2.5352275946031684e-11,"1131":6.979633564129145e-9,"1132":2.5352275946031684e-11,"1133":2.5352275946031684e-11,"1134":2.8088614728103547e-11,"1135":2.8088614728103547e-11,"1136":2.8088614728103547e-11,"1137":8.4698520318953e-10,"1138":5.897804147989866e-12,"1139":5.897804147989866e-12,"1140":8.4698520318953e-10,"1141":5.897804147989866e-12,"1142":5.897804147989866e-12,"1143":8.4698520318953e-10,"1144":5.897804147989866e-12,"1145":5.897804147989866e-12,"1146":5.614833170923077e-13,"1147":5.614833170923077e-13,"1148":5.614833170923077e-13,"1149":9.13308148488941e-12,"1150":7.256134520250467e-14,"1151":7.256134520250467e-14,"1152":9.13308148488941e-12,"1153":7.256134520250467e-14,"1154":7.256134520250467e-14,"1155":9.13308148488941e-12,"1156":7.256134520250467e-14,"1157":7.256134520250467e-14,"1158":8.950924087988164e-9,"1159":8.950924087988164e-9,"1160":8.950924087988164e-9,"1161":6.239382094015577e-9,"1162":2.0298906941305403e-9,"1163":2.0298906941305403e-9,"1167":6.239382094015577e-9,"1168":2.0298906941305403e-9,"1169":2.0298906941305403e-9,"1170":1.250788838107486e-7,"1171":1.250788838107486e-7,"1172":1.250788838107486e-7,"1174":3.0769566369366554e-7,"1175":3.0769566369366554e-7,"1177":3.0769566369366554e-7,"1178":3.0769566369366554e-7,"1180":3.0769566369366554e-7,"1181":3.0769566369366554e-7,"1182":2.5361656381333564e-13,"1183":2.5361656381333564e-13,"1184":2.5361656381333564e-13,"1185":1.839818399761177e-10,"1186":8.001301442019559e-14,"1187":8.001301442019559e-14,"1188":1.839818399761177e-10,"1189":8.001301442019559e-14,"1190":8.001301442019559e-14,"1191":1.839818399761177e-10,"1192":8.001301442019559e-14,"1193":8.001301442019559e-14,"1194":4.901403892751426e-11,"1195":4.901403892751426e-11,"1196":4.901403892751426e-11,"1197":1.059215368104396e-9,"1198":4.679661789392344e-12,"1199":4.679661789392344e-12,"1200":1.059215368104396e-9,"1201":4.679661789392344e-12,"1202":4.679661789392344e-12,"1203":1.059215368104396e-9,"1204":4.679661789392344e-12,"1205":4.679661789392344e-12,"1206":1.3238553879668853e-7,"1207":1.3238553879668853e-7,"1208":1.3238553879668853e-7,"1210":1.5190009453811103e-7,"1211":1.5190009453811103e-7,"1213":1.5190009453811103e-7,"1214":1.5190009453811103e-7,"1216":1.5190009453811103e-7,"1217":1.5190009453811103e-7,"1218":6.80367912830291e-9,"1219":6.80367912830291e-9,"1220":6.80367912830291e-9,"1222":4.028060244920393e-9,"1223":4.028060244920393e-9,"1225":4.028060244920393e-9,"1226":4.028060244920393e-9,"1228":4.028060244920393e-9,"1229":4.028060244920393e-9,"1230":1.6043638233843012e-13,"1231":1.6043638233843012e-13,"1232":1.6043638233843012e-13,"1233":1.2960999119312173e-11,"1234":1.0153836772917604e-14,"1235":1.0153836772917604e-14,"1236":1.2960999119312173e-11,"1237":1.0153836772917604e-14,"1238":1.0153836772917604e-14,"1239":1.2960999119312173e-11,"1240":1.0153836772917604e-14,"1241":1.0153836772917604e-14,"1242":2.696882256810376e-12,"1243":2.696882256810376e-12,"1244":2.696882256810376e-12,"1245":2.2558165198413342e-10,"1246":5.66830732170998e-13,"1247":5.66830732170998e-13,"1248":2.2558165198413342e-10,"1249":5.66830732170998e-13,"1250":5.66830732170998e-13,"1251":2.2558165198413342e-10,"1252":5.66830732170998e-13,"1253":5.66830732170998e-13,"1257":3.179332429920783e-8,"1258":1.524824332182804e-9,"1259":1.524824332182804e-9,"1260":3.179332429920783e-8,"1261":1.524824332182804e-9,"1262":1.524824332182804e-9,"1263":3.179332429920783e-8,"1264":1.524824332182804e-9,"1265":1.524824332182804e-9,"1266":1.6896742942596736e-8,"1267":1.6896742942596736e-8,"1268":1.6896742942596736e-8,"1270":1.3844172366582671e-8,"1271":1.3844172366582671e-8,"1273":1.3844172366582671e-8,"1274":1.3844172366582671e-8,"1276":1.3844172366582671e-8,"1277":1.3844172366582671e-8,"1278":2.8125551409096467e-13,"1279":2.8125551409096467e-13,"1280":2.8125551409096467e-13,"1281":6.769821959531577e-11,"1282":1.0110551786720684e-13,"1283":1.0110551786720684e-13,"1284":6.769821959531577e-11,"1285":1.0110551786720684e-13,"1286":1.0110551786720684e-13,"1287":6.769821959531577e-11,"1288":1.0110551786720684e-13,"1289":1.0110551786720684e-13,"1290":0.0000014794662723853547,"1291":0.0000014794662723853547,"1292":0.0000014794662723853547,"1294":2.2355729968471062e-7,"1295":2.2355729968471062e-7,"1300":2.2355729968471062e-7,"1301":2.2355729968471062e-7,"1302":1.8514906260556233e-7,"1303":1.8514906260556233e-7,"1304":1.8514906260556233e-7,"1305":1.5514672461383304e-7,"1306":1.329635735862822e-8,"1307":1.329635735862822e-8,"1311":1.5514672461383304e-7,"1312":1.329635735862822e-8,"1313":1.329635735862822e-8,"1314":8.129058055292895e-14,"1315":8.129058055292895e-14,"1316":8.129058055292895e-14,"1317":1.1453370762089923e-10,"1318":2.1400682864789953e-14,"1319":2.1400682864789953e-14,"1320":1.1453370762089923e-10,"1321":2.1400682864789953e-14,"1322":2.1400682864789953e-14,"1323":1.1453370762089923e-10,"1324":2.1400682864789953e-14,"1325":2.1400682864789953e-14}}');
                // const inputSpectres = {8: {0: 0.12, 16:0.5, 1300:5.0}, 0:{0:0.5, 101:0.1}};
                const simulationsNumber = enumPoker.enumPoker.perfomancePolicy.simulationsCount;
                const numThreads = enumPoker.enumPoker.perfomancePolicy.numThreads;
                strategy = await addonUtils.getStrategyAsync(true, setup.addonSetup, simSession, inputSpectres, simulationsNumber, numThreads);
            } else {
                strategy = await addonUtils.getStrategyAsync(false, setup.addonSetup);
            }
        } catch (e) {
            console.log(e);
            utils.errorsHandler(e);
            return null;
        }
        // console.log('strategyObject from online!!!');
        // console.log(strategy);
    }

    setup.newCash[movesCount] = { position, strategy, sizing: curInvest };  // sizing - фактически сделанный сайзинг в actions

    // ищем есть ли в setup.hillsCash совпадение по позициям и если да - берем горб из объекта с самым высоким индексом
    const index = setup.hillsCash.reduceRight((index, cur, i) => {
        if (index === -1) {
            if (cur.position === position && movesCount > i) {
                return i;
            }
        }
        return index;
    }, -1);

    const optimalSizing = curInvest;

    return textHandsArr.map((hand, i) => {
        let weight;
        let strat;
        if (!(i in strategy)) {
            weight = -1;
            strat = {};
        } else {
            // текущий вес ноды руки!
            weight = (index !== -1 && index > 1) ? setup.hillsCash[index].cash[i].weight * setup.hillsCash[index].cash[i].strategy[setup.hillsCash[index].cash[i].optimalSizing].strategy : 1;
            strat = strategy[i];
        }
        return { hand, weight, strategy: strat, optimalSizing };
    });
};

//
getAllHandStrategy = (cash, position, setup) => {            // cash = [{ hand, weight, strategy, optimalSizing, isPreflop }, .....]

    // console.log('setup.movesCash');
    // console.log(setup.movesCash);


    const preflopCash = position !== undefined ? setup.hillsCash.reduceRight((cash, cur) => {
        // console.log(`position: ${position}, cur.position: ${cur.position}, cur.isPreflop: ${cur.isPreflop}`);
        if (!cash && position === cur.position && cur.isPreflop) {
            return cur.cash;
        }
        return cash;
    }, undefined) : null;
    // console.log('preflopCash');
    // console.log(preflopCash);

    // console.log('preflopCash[0].strategy[preflopCash[0].optimalSizing]');
    // console.log(preflopCash ? preflopCash[0].strategy[preflopCash[0].optimalSizing] : null);
    //
    // console.log('preflopCash[0].strategy[preflopCash[0].optimalSizing].strategy');
    // console.log(preflopCash ? preflopCash[0].strategy[preflopCash[0].optimalSizing].strategy: null);
    //
    // console.log('!!preflopCash');
    // console.log(!!preflopCash);


    const allHandsStrategy = {     // simulator format
        allHands: cash.map((obj, i) => {     // { hand, weight, strategy, optimalSizing, isPreflop }
            const {
                hand,
                weight,
                strategy,
            } = obj;
            const strat = {};

            if (Object.keys(strategy).length) {
                Object.keys(strategy).forEach(key => {
                    strat[key == -1 ? -1 : parseInt(key)/100] = {
                        strategy: strategy[key].strategy,
                        ev: (strategy[key].ev/100).toFixed(2),
                    };
                })
            }

            return {
                hand,
                weight,
                preflopWeight: preflopCash ? preflopCash[i].weight * preflopCash[i].strategy[preflopCash[i].optimalSizing].strategy : 1,
                moves: strat,
            };
        })
    };

    // console.log('allHandsStrategy');
    // console.log(allHandsStrategy);

    // normalize
    let maxWeight = 0;
    let maxPreflopWeight = 0;
    allHandsStrategy.allHands.forEach( hand => {
        if (hand.weight > maxWeight) {
            maxWeight = hand.weight;
        }
        if (hand.preflopWeight > maxPreflopWeight) {
            maxPreflopWeight = hand.preflopWeight;
        }
    });

    allHandsStrategy.allHands = allHandsStrategy.allHands.map( hand => {
        return Object.assign(hand, {
            weight: hand.weight/maxWeight || 0,
            preflopWeight: hand.preflopWeight/maxPreflopWeight
        });
    }).filter(el => el.weight >= 0);

    // console.log('allHandsStrategy');
    // console.log(allHandsStrategy.allHands);

    return  allHandsStrategy;
};

isInitPlayersEqual = (request, setup) => {
    if (request.players.length !== setup.movesCash.players.length) {
        return false;
    }
    for (let i = 0; i < request.players.length; i++) {
        const nickname = request.players[i].name;
        const stack = parseInt(request.players[i].stack * 100);
        const position = request.players[i].position;

        const checkCashPlayer = {
            nickname,
            stack,
            position,
        };

        if (!_.isEqual(checkCashPlayer, setup.movesCash.players[i])) {
            return false;
        }
    }
    return true;
};

popMoves = (nMove, setup, isBoard, onlyMovesInEngine) => {
    if (!onlyMovesInEngine) {
        setup.hillsCash.length = nMove;
    }

    // console.log(`popMoves... nMove: ${nMove}, setup.movesInEngine: ${setup.movesInEngine}`);
    while(setup.movesInEngine > nMove && setup.movesInEngine > 0) {
        if (isBoard) {
            addonUtils.popMove(setup.addonSetup);
        }
        setup.movesInEngine--;
    }
};

const isNodeSimulation = (street, moveAtStreet) => {
    if (street > enumPoker.enumPoker.perfomancePolicy.startSimulationStreet) {
        return true;
    } else if (street === enumPoker.enumPoker.perfomancePolicy.startSimulationStreet) {
        return moveAtStreet >= enumPoker.enumPoker.perfomancePolicy.startMoveSimulation;
    }

    return false;
};

const isMovesChangedOnStreet = (actions, rawActionsOld) => {
    const oldActions = rawActionsOld.filter(action => action.street === actions[0].street);
    if (oldActions.length !== actions.length) {
        return true;
    }
    return actions.reduce((isChanged, action, i) => {
        if (!isChanged) {
            return !_.isEqual(action, oldActions[i]);
        }
        return true;
    }, false);
};

const movesHandler = async (request, bbSize, setup, nodeId) => {      // nodeId - начиная с нуля... первый ход префлопа после постов - nodeId === 2. Пуш борд не считаем
    // console.log(`enter moves handler!!`);
    const simSession = addonUtils.getSimSessionForFeatureWithoutHeroHand();
    let isCashSteelUseful = true;
    let movesCount = 0;     // соответствует индексу в рав актионс!

    let { rawActionList } = request.request;
    rawActionList = rawActionList.map((action, i) => {
        const prevPlayerAmount = playUtils.getPrevAmountOnCurStreet(rawActionList, i);
        return Object.assign(action, { invest: action.amount - prevPlayerAmount });
    });

    // в самом конце при выходе из функции записываем в кэш rawActionList


    if (isOfflineStrategy || !isInitPlayersEqual(request, setup) || setup.movesCash.generation != currentGeneration) {
        console.log('!!!!! releaseSetup !!!!');
        // console.log(bbSize);
        setup.addonSetup = addonUtils.getSetup(bbSize);
        setup.resetCash();
        setup.movesCash.generation = currentGeneration;
        setup.hillsCash = [];
        setup.movesInEngine = 0;           // соответствует количеству запушенных ходов в движок, включая пуши бордов
        isCashSteelUseful = false;

        //////////////////////////////////////// SETTING PLAYERS
        for (let i = 0; i < request.players.length; i++) {
            // test empty adaptation
            // const adaptArr = [];
            // for (let i = 0; i < adapt_size; i++) {
            //     adaptArr.push(0);
            // }

            const nickname = request.players[i].name;
            const stack = parseInt(request.players[i].stack * 100);
            const position = request.players[i].position;

            const cashPlayer = {
                nickname,
                stack,
                position,
            };

            addonUtils.setPlayer(setup, position, stack);
            setup.movesCash.players.push(cashPlayer);
        }

    }


    // preflop moves		popMoves(i);
    //
    // flop board 			popMoves(setup.movesCash.preflop.length);
    // flop moves			popMoves(setup.movesCash.preflop.length + 1 + i);
    //
    // turn board			popMoves(setup.movesCash.preflop.length + setup.movesCash.flop.length + 1);
    // turn moves			popMoves(setup.movesCash.preflop.length + setup.movesCash.flop.length + 2 + i);
    //
    // river board 			popMoves(setup.movesCash.preflop.length + setup.movesCash.flop.length + setup.movesCash.turn.length + 2);
    // river moves			popMoves(setup.movesCash.preflop.length + setup.movesCash.flop.length + setup.movesCash.turn.length + 3 + i);

    //////////////////////////////////////// PREFLOP MOVES
    const playersInvestPreflop = {};
    for (let i = 0; i < request.actions.preflop.length; i++) {
        let curInvest = 0;
        if (request.actions.preflop[i].position in playersInvestPreflop) {
            curInvest = parseInt(Math.round(+request.actions.preflop[i].amount * 100)) - playersInvestPreflop[request.actions.preflop[i].position]
        } else {
            curInvest = parseInt(Math.round(+request.actions.preflop[i].amount * 100));
        }

        const maxAmount = i > 0 ? (getMaxAmount(request.actions.preflop, i - 1) * 100) : 0;
        let maxAmountRaise;
        if (parseInt(Math.round(+request.actions.preflop[i].amount * 100)) > maxAmount) {
            maxAmountRaise = parseInt(Math.round(+request.actions.preflop[i].amount * 100)) - maxAmount;
        } else if (parseInt(Math.round(+request.actions.preflop[i].amount * 100)) <= maxAmount) {
            maxAmountRaise = request.actions.preflop[i].action === 5 ? -1 : 0;
        }

        const position = request.actions.preflop[i].position;
        const action = i < 2 ? 0 : request.actions.preflop[i].action;
        const pushHintMoveData = {
            curInvest,
            position,
            action,
        };

        // получаем сайзинги из аддона
        // const maxDeviationsPercent = enumPoker.enumPoker.perfomancePolicy.deviationSizings[0];  // preflop  [0.15, 0.2, 0.25]
        // const isNotStandart = i === 0 && playUtils.isNonStandartSizings(rawActionList, 0, maxDeviationsPercent, setup.addonSetup);
        const isNotStandart = false;

        if (!_.isEqual(setup.movesCash.preflop[i], pushHintMoveData) || isNotStandart) {     // no using cash
            if (isCashSteelUseful) {        // if we used cash before this iteration
                console.log(`making pop_moves inside preflop's moves movesHandler`);
                popMoves(i, setup);
            }
            isCashSteelUseful = false;

            let cash = [];      // [{}, {}, etc]   index === hand from dict
            if (i > 1) {
                const nodeSimulation = isNodeSimulation(0, i);
                addonUtils.getSizings(setup.addonSetup, simSession);
                const maxAmountBefore = playUtils.getMaxAmountBeforeMove(rawActionList.filter(el => el.street === 0), i, 0);
                if (request.actions.preflop[i].action < 3) {
                    addonUtils.addSizing(setup.addonSetup, (request.actions.preflop[i].amount - maxAmountBefore) * 100, simSession);
                }
                cash = await getHill(position, maxAmountRaise, movesCount, setup, nodeSimulation, simSession, rawActionList).then(arr => arr);
                if (cash === null) {
                    break;
                }
            }

            setup.hillsCash[movesCount] = { position, cash,  isPreflop: true };      // PREFLOP!!!

            if (i > 1) {
                const maxAmountBefore = playUtils.getMaxAmountBeforeMove(rawActionList.filter(el => el.street === 0), i, 0);
                // addonUtils.getSizings(setup.addonSetup, simSession);
                if (request.actions.preflop[i].action < 3) {
                    addonUtils.addSizing(setup.addonSetup, (request.actions.preflop[i].amount - maxAmountBefore) * 100, simSession);
                }
            }
            console.log(`setup.push_move(${position}, ${curInvest}, ${action})`);
            const result = setup.addonSetup.push_move(position, curInvest, action);

            setup.movesInEngine++;
            setup.movesCash.preflop.push(pushHintMoveData);
        }

        if (nodeId === movesCount) {
            setup.movesCash.rawActionsOld = rawActionList;
            return getAllHandStrategy(setup.hillsCash[movesCount].cash, undefined, setup);
        }
        movesCount++;
        playersInvestPreflop[position] = parseInt(Math.round(+request.actions.preflop[i].amount * 100));
    }

    //////////////////////////////////////// PUSH FLOP BOARD
    if (request.actions.flop || (request.board.c1 && nodeId === movesCount + 1)) {
        const isC1Equal = request.board.c1 === setup.movesCash.c1;
        const isC2Equal = request.board.c2 === setup.movesCash.c2;
        const isC3Equal = request.board.c3 === setup.movesCash.c3;
        if (!(isC1Equal && isC2Equal && isC3Equal)) {
            if (isCashSteelUseful) {
                console.log('flop board pop moves');
                popMoves(setup.movesCash.preflop.length, setup, true);
                setup.movesCash.flop = [];
                setup.movesCash.turn = [];
                setup.movesCash.river = [];
                setup.movesCash.c4 = null;
                setup.movesCash.c5 = null;
            }
            isCashSteelUseful = false;

            const flopPush = setup.addonSetup.push_move(
                enumPoker.enumPoker.dealPositions.DEALPOS_FLOP,
                enumPoker.enumPoker.cardsName.indexOf(request.board.c1),
                enumPoker.enumPoker.cardsName.indexOf(request.board.c2),
                enumPoker.enumPoker.cardsName.indexOf(request.board.c3)
            );

            // console.log('flopPush');
            console.log(`setup.push_move(${enumPoker.enumPoker.dealPositions.DEALPOS_FLOP}, ${enumPoker.enumPoker.cardsName.indexOf(request.board.c1)}, ${enumPoker.enumPoker.cardsName.indexOf(request.board.c2)}, ${enumPoker.enumPoker.cardsName.indexOf(request.board.c3)});`);

            setup.movesCash.c1 = request.board.c1;
            setup.movesCash.c2 = request.board.c2;
            setup.movesCash.c3 = request.board.c3;
            setup.movesInEngine++;
        }


        //////////////////////////////////////// FLOP MOVES
        const playersInvestFlop = {};
        for (let i = 0; i < request.actions.flop.length; i++) {
            let curInvest = 0;
            if (request.actions.flop[i].position in playersInvestFlop) {
                curInvest = parseInt(Math.round(+request.actions.flop[i].amount * 100)) - playersInvestFlop[request.actions.flop[i].position]
            } else {
                curInvest = parseInt(Math.round(+request.actions.flop[i].amount * 100));
            }

            const maxAmount = i > 0 ? (getMaxAmount(request.actions.flop, i - 1) * 100) : 0;
            let maxAmountRaise;
            if (parseInt(Math.round(+request.actions.flop[i].amount * 100)) > maxAmount) {
                maxAmountRaise = parseInt(Math.round(+request.actions.flop[i].amount * 100)) - maxAmount;
            } else if (parseInt(Math.round(+request.actions.flop[i].amount * 100)) <= maxAmount) {
                maxAmountRaise = request.actions.flop[i].action === 5 ? -1 : 0;
            }

            const position = request.actions.flop[i].position;
            const action = request.actions.flop[i].action;
            const pushHintMoveData = {
                curInvest,
                position,
                action,
            };

            // получаем сайзинги из аддона
            const maxDeviationsPercent = enumPoker.enumPoker.perfomancePolicy.deviationSizings[1];  // flop  [0.15, 0.2, 0.25] example
            const movesChangedOnStreet = isMovesChangedOnStreet(request.actions.flop, setup.movesCash.rawActionsOld.filter(el => el.street === 1));

            // обнуляем сетап до корня улицы! поэтому всегда пушим мувы с нуля независимо от того юзаем ли кэш
            const isNotStandart = i === 0 && movesChangedOnStreet && playUtils.isNonStandartSizings(rawActionList, 1, maxDeviationsPercent, setup.addonSetup);
            // нужно очистить количество setup.movesInEngine и только!
            popMoves(setup.movesCash.preflop.length + 1 + i, setup, false, true);

            if (!_.isEqual(setup.movesCash.flop[i], pushHintMoveData) || (movesChangedOnStreet && isNotStandart)) {      // no using cash
                if (isCashSteelUseful) {
                    popMoves(setup.movesCash.preflop.length + 1 + i, setup);
                }
                isCashSteelUseful = false;

                const nodeSimulation = isNodeSimulation(1, i) || rawActionList[movesCount].gto;
                addonUtils.getSizings(setup.addonSetup, simSession);

                const maxAmountBefore = playUtils.getMaxAmountBeforeMove(rawActionList.filter(el => el.street === 1), i, 1);
                // addonUtils.getSizings(setup.addonSetup, simSession);
                if (request.actions.flop[i].action < 3) {
                    addonUtils.addSizing(setup.addonSetup, (request.actions.flop[i].amount - maxAmountBefore) * 100, simSession);
                }
                const cash = await getHill(position, maxAmountRaise, movesCount, setup, nodeSimulation, simSession, rawActionList);
                if (cash === null) {
                    break;
                }
                setup.hillsCash[movesCount] = { position, cash,  isPreflop: false };

                setup.movesCash.flop.push(pushHintMoveData);
            }

            console.log(`setup.push_move(${position}, ${curInvest}, ${action})`);
            const result = setup.addonSetup.push_move(position, curInvest, action);
            setup.movesInEngine++;

            if (nodeId === movesCount) {
                setup.movesCash.rawActionsOld = rawActionList;
                return getAllHandStrategy(setup.hillsCash[movesCount].cash, position, setup);
            }
            movesCount++;
            playersInvestFlop[position] = parseInt(Math.round(+request.actions.flop[i].amount * 100));
        }
    }


    //////////////////////////////////////// PUSH TURN
    if (request.actions.turn) {
        if (request.board.c4 !== setup.movesCash.c4) {
            if (isCashSteelUseful) {
                popMoves(setup.movesCash.preflop.length + setup.movesCash.flop.length + 1, setup, true);
                setup.movesCash.turn = [];
                setup.movesCash.river = [];
                setup.movesCash.c5 = null;
            }
            isCashSteelUseful = false;

            setup.movesCash.c4 = request.board.c4;
        }
        const turnBoard = setup.addonSetup.push_move(enumPoker.enumPoker.dealPositions.DEALPOS_TURN, enumPoker.enumPoker.cardsName.indexOf(request.board.c4));
        console.log(`setup.push_move(${enumPoker.enumPoker.dealPositions.DEALPOS_TURN}, ${enumPoker.enumPoker.cardsName.indexOf(request.board.c4)});`);
        setup.movesInEngine++;


        //////////////////////////////////////// TURN MOVES
        const playersInvestTurn = {};
        for (let i = 0; i < request.actions.turn.length; i++) {
            let curInvest = 0;
            if (request.actions.turn[i].position in playersInvestTurn) {
                curInvest = parseInt(Math.round(+request.actions.turn[i].amount * 100)) - playersInvestTurn[request.actions.turn[i].position]
            } else {
                curInvest = parseInt(Math.round(+request.actions.turn[i].amount * 100));
            }

            const maxAmount = i > 0 ? (getMaxAmount(request.actions.turn, i - 1) * 100) : 0;
            let maxAmountRaise;
            if (parseInt(Math.round(+request.actions.turn[i].amount * 100)) > maxAmount) {
                maxAmountRaise = parseInt(Math.round(+request.actions.turn[i].amount * 100)) - maxAmount;
            } else if (parseInt(Math.round(+request.actions.turn[i].amount * 100)) <= maxAmount) {
                maxAmountRaise = request.actions.turn[i].action === 5 ? -1 : 0;
            }

            const position = request.actions.turn[i].position;
            const action = request.actions.turn[i].action;
            const pushHintMoveData = {
                curInvest,
                position,
                action,
            };

            // получаем сайзинги из аддона
            const maxDeviationsPercent = enumPoker.enumPoker.perfomancePolicy.deviationSizings[2];  // turn  [0.15, 0.2, 0.25] example
            const movesChangedOnStreet = isMovesChangedOnStreet(request.actions.turn, setup.movesCash.rawActionsOld.filter(el => el.street === 2));

            // обнуляем сетап до корня улицы! поэтому всегда пушим мувы с нуля независимо от того юзаем ли кэш
            const isNotStandart = i === 0 && playUtils.isNonStandartSizings(rawActionList, 2, maxDeviationsPercent, setup.addonSetup);
            popMoves(setup.movesCash.preflop.length + setup.movesCash.flop.length + 2 + i, setup, false, true);

            if (!_.isEqual(setup.movesCash.turn[i], pushHintMoveData) || (movesChangedOnStreet && isNotStandart)) {      // no using cash
                if (isCashSteelUseful) {
                    popMoves(setup.movesCash.preflop.length + setup.movesCash.flop.length + 2 + i, setup);
                }
                isCashSteelUseful = false;

                const nodeSimulation = isNodeSimulation(2, i) || rawActionList[movesCount].gto;
                addonUtils.getSizings(setup.addonSetup, simSession);

                const maxAmountBefore = playUtils.getMaxAmountBeforeMove(rawActionList.filter(el => el.street === 2), i, 2);
                // addonUtils.getSizings(setup.addonSetup, simSession);
                if (request.actions.turn[i].action < 3) {
                    addonUtils.addSizing(setup.addonSetup, (request.actions.turn[i].amount - maxAmountBefore) * 100, simSession);
                }
                const cash = await getHill(position, maxAmountRaise, movesCount, setup, nodeSimulation, simSession, rawActionList);
                if (cash === null) {
                    break;
                }
                setup.hillsCash[movesCount] = { position, cash,  isPreflop: false };

                setup.movesCash.turn.push(pushHintMoveData);
            }

            console.log(`setup.push_move(${position}, ${curInvest}, ${action})`);
            const result = setup.addonSetup.push_move(position, curInvest, action);
            setup.movesInEngine++;

            if (nodeId === movesCount) {
                setup.movesCash.rawActionsOld = rawActionList;
                return getAllHandStrategy(setup.hillsCash[movesCount].cash, position, setup);
            }
            movesCount++;
            playersInvestTurn[position] = parseInt(Math.round(+request.actions.turn[i].amount * 100));
        }
    }



    //////////////////////////////////////// PUSH RIVER
    if (request.actions.river) {
        if (request.board.c5 !== setup.movesCash.c5) {
            if (isCashSteelUseful) {
                popMoves(setup.movesCash.preflop.length + setup.movesCash.flop.length + setup.movesCash.turn.length + 2, setup, true);
                setup.movesCash.river = [];
            }
            isCashSteelUseful = false;

            setup.movesCash.c5 = request.board.c5;
        }
        const riverBoard = setup.addonSetup.push_move(enumPoker.enumPoker.dealPositions.DEALPOS_RIVER, enumPoker.enumPoker.cardsName.indexOf(request.board.c5));
        console.log(`setup.push_move(${enumPoker.enumPoker.dealPositions.DEALPOS_RIVER}, ${enumPoker.enumPoker.cardsName.indexOf(request.board.c5)});`);
        setup.movesInEngine++;

        //////////////////////////////////////// RIVER MOVES
        const playersInvestRiver = {};
        for (let i = 0; i < request.actions.river.length; i++) {
            let curInvest = 0;
            if (request.actions.river[i].position in playersInvestRiver) {
                curInvest = parseInt(Math.round(+request.actions.river[i].amount * 100)) - playersInvestRiver[request.actions.river[i].position]
            } else {
                curInvest = parseInt(Math.round(+request.actions.river[i].amount * 100));
            }

            const maxAmount = i > 0 ? (getMaxAmount(request.actions.river, i - 1) * 100) : 0;
            let maxAmountRaise;
            if (parseInt(Math.round(+request.actions.river[i].amount * 100)) > maxAmount) {
                maxAmountRaise = parseInt(Math.round(+request.actions.river[i].amount * 100)) - maxAmount;
            } else if (parseInt(Math.round(+request.actions.river[i].amount * 100)) <= maxAmount) {
                maxAmountRaise = request.actions.river[i].action === 5 ? -1 : 0;
            }

            const position = request.actions.river[i].position;
            const action = request.actions.river[i].action;
            const pushHintMoveData = {
                curInvest,
                position,
                action,
            };

            // получаем сайзинги из аддона
            const maxDeviationsPercent = enumPoker.enumPoker.perfomancePolicy.deviationSizings[3];  // turn  [0.15, 0.2, 0.25] example
            const movesChangedOnStreet = isMovesChangedOnStreet(request.actions.river, setup.movesCash.rawActionsOld.filter(el => el.street === 3));

            // обнуляем сетап до корня улицы! поэтому всегда пушим мувы с нуля независимо от того юзаем ли кэш
            const isNotStandart = i === 0 && playUtils.isNonStandartSizings(rawActionList, 3, maxDeviationsPercent, setup.addonSetup);
            popMoves(setup.movesCash.preflop.length + setup.movesCash.flop.length + setup.movesCash.turn.length + 3 + i, setup, false, true);

            if (!_.isEqual(setup.movesCash.river[i], pushHintMoveData) || (movesChangedOnStreet && isNotStandart)) {      // no using cash
                if (isCashSteelUseful) {
                    popMoves(setup.movesCash.preflop.length + setup.movesCash.flop.length + setup.movesCash.turn.length + 3 + i, setup);
                }
                isCashSteelUseful = false;

                const nodeSimulation = isNodeSimulation(3, i) || rawActionList[movesCount].gto;
                addonUtils.getSizings(setup.addonSetup, simSession);

                const maxAmountBefore = playUtils.getMaxAmountBeforeMove(rawActionList.filter(el => el.street === 3), i, 3);
                // addonUtils.getSizings(setup.addonSetup, simSession);
                if (request.actions.river[i].action < 3) {
                    addonUtils.addSizing(setup.addonSetup, (request.actions.river[i].amount - maxAmountBefore) * 100, simSession);
                }
                const cash = await getHill(position, maxAmountRaise, movesCount, setup, nodeSimulation, simSession, rawActionList);
                if (cash === null) {
                    break;
                }
                setup.hillsCash[movesCount] = { position, cash,  isPreflop: false };

                setup.movesCash.river.push(pushHintMoveData);
            }

            console.log(`setup.push_move(${position}, ${curInvest}, ${action})`);
            const result = setup.addonSetup.push_move(position, curInvest, action);
            setup.movesInEngine++;

            if (nodeId === movesCount) {
                setup.movesCash.rawActionsOld = rawActionList;
                return getAllHandStrategy(setup.hillsCash[movesCount].cash, position, setup);
            }
            movesCount++;
            playersInvestRiver[position] = parseInt(Math.round(+request.actions.river[i].amount * 100));
        }
    }
};

module.exports.movesHandler = movesHandler;
module.exports.changeAddonPath = changeAddonPath;
module.exports.generationsNames = generationsNames;